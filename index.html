<!DOCTYPE html>
<html lang="zh-CN">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="谢红光" />


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="茶壶盖">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="茶壶盖">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="茶壶盖">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="茶壶盖" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/dog.jpg">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>茶壶盖</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/dog.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">谢红光</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:xiehongguang0228@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/Alvis888" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa StackOverflow" href="https://stackoverflow.com/users/6244981/xiehongguang" title="StackOverflow"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/NET/">.NET</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/360云/">360云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AZURE/">AZURE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Axis属性/">Axis属性</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bt/">Bt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Build-Event/">Build Event</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-写入文件/">C#写入文件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CURD/">CURD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESLint/">ESLint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Email/">Email</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ExecuteNonQuery/">ExecuteNonQuery ()</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Json/">Json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LUIS/">LUIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React-D3-Axis/">React-D3 Axis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL-server/">SQL server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Socket/">Socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS/">VS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XML/">XML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bat/">bat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bot/">bot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bot-framework/">bot framework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c-c/">c/c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/case语句/">case语句</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/date/">date()</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dialog/">dialog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fetch/">fetch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fetch链接数据库/">fetch链接数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hook/">hook</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/material-ui/">material ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/microsoft-bot/">microsoft bot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/office/">office</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qq/">qq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rn/">rn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sate/">sate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/select/">select</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/server-2008/">server 2008</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/service/">service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slack/">slack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlserver/">sqlserver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql日期加减/">sql日期加减</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql日期格式化/">sql日期格式化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/static/">static</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/string/">string</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thinkphp/">thinkphp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/time/">time()</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unicode/">unicode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-api/">web api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webhook/">webhook</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webhook，Gitlab/">webhook，Gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows-service/">windows service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/word/">word</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wpf/">wpf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/中文/">中文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内存管理/">内存管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/删除/">删除</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图片库/">图片库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符串/">字符串</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/存储过程/">存储过程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/实体形式/">实体形式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/弹窗/">弹窗</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/截取/">截取</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搭建/">搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库，AZURE/">数据库，AZURE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/时间戳/">时间戳</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/登陆页面/">登陆页面</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/种子/">种子</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/空白页/">空白页</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网盘搜索/">网盘搜索</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网站/">网站</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/美剧/">美剧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/选择框/">选择框</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/邮件/">邮件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/链接/">链接</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">谢红光</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/dog.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">谢红光</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:xiehongguang0228@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/Alvis888" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa StackOverflow" target="_blank" href="https://stackoverflow.com/users/6244981/xiehongguang" title="StackOverflow"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-NET static知识入门" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/15/NET static知识入门/" class="article-date">
      <time datetime="2017-08-15T01:32:09.000Z" itemprop="datePublished">2017-08-15</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/15/NET static知识入门/">.NET static知识入门</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>&ensp;&ensp;&ensp;&ensp;C# 语言中，通过类名调用静态成员，通过指定的实例名调用实例成员。</p>
<h2 id="1-static关键字"><a href="#1-static关键字" class="headerlink" title="1. static关键字"></a>1. static关键字</h2><p>&ensp;&ensp;&ensp;&ensp;如果有些成员是所有对象共用的，此时可以将成员定义为静态的，当该类被装入内存时，系统会在内存中专门开辟一部分区域来保存这些静态成员。<br>&ensp;&ensp;&ensp;&ensp;static关键字表示类或成员加载到内存中只有一份，而不是有多个实例。当垃圾回收器检测到不再使用该静态成员后，会自动释放内存。<br> &ensp;&ensp;&ensp;&ensp;static 修饰符可用于类、字段、方法、属性、运算符、事件和构造函数，但不能用于索引器、析构函数或类以外的类型。<br>&ensp;&ensp;&ensp;&ensp;static </p>
<pre><code>静态字段常用的用法：
    1. 记录已实例化对象的个数  
    2. 存储必须在所有实例之间共享的值
</code></pre><h2 id="2-static-静态成员"><a href="#2-static-静态成员" class="headerlink" title="2. static 静态成员"></a>2. static 静态成员</h2><p> &ensp;&ensp;&ensp;&ensp; static变量在对象被实例化时创建，通过对象进行访问一个类的所有实例的<strong>同一C#静态变量都是同一个值</strong>，同一个类的不同实例的<strong>同一非静态变量可以是不同的值</strong>。  </p>
<pre><code>static class CompanyEmployee
{
    public static void DoSomething() { /*...*/ }
    public static void DoSomethingElse() { /*...*/  }
     public static cook;
}
</code></pre><ol>
<li>非静态类可以包含静态的方法、字段、属性或事件；  </li>
<li>无论对一个类创建多少个实例，它的静态成员都只有一个副本；  </li>
<li>静态方法和属性不能访问其包含类型中的非静态字段和事件，并且不能访问任何对象的实例变量；  </li>
<li>静态方法只能被重载，而不能被重写，因为静态方法不属于类的实例成员；  </li>
<li>虽然字段不能声明为 static const，但 const 字段的行为在本质上是静态的。这样的字段属于类，不属于类的实例。因此，可以同对待静态字段一样使用 ClassName.MemberName 表示法来访问 const 字段；    </li>
<li>C# 不支持静态局部变量(在方法内部定义静态变量)。</li>
<li>static 声明的静态成员在外部只能通过类名来引用，不能用实例名来引用</li>
</ol>
<h2 id="2-static-静态类"><a href="#2-static-静态类" class="headerlink" title="2. static 静态类"></a>2. static 静态类</h2><p>&ensp;&ensp;&ensp;&ensp; 声明自定义类时如果加上static关键字，则该类就是静态类<br>&ensp;&ensp;&ensp;&ensp; 一般将成员声明为静态，而不是将类声明为静态。如果将类声明为静态，则该类的所有成员都必须声明为静态的。<br>&ensp;&ensp;&ensp;&ensp; 静态类可以用作<strong>只对输入参数进行操作</strong>并且<strong>不必获取或设置任何内部实例字段</strong>的<strong>方法集的方便容器</strong>。 例如，在 .NET Framework 类库中，静态 System.Math 类包含执行数学运算，而无需存储或检索对 Math 类特定实例唯一的数据的方法。 即，通过指定类名和方法名称来应用类的成员，如下面的示例所示。   </p>
<pre><code>double dub = -3.14;  
Console.WriteLine(Math.Abs(dub));  
Console.WriteLine(Math.Floor(dub));  
Console.WriteLine(Math.Round(Math.Abs(dub)));  

// Output:  
// 3.14  
// -4  
// 3
</code></pre><p>&ensp;&ensp;&ensp;&ensp; 加载引用静态类的程序时，CLR(公共语言运行库)可以保证在程序<strong>首次应用该类前自动加载该类</strong>，并初始化该类的字段以及调用静态其静态构造函数。<strong>静态类将一直保留在内存中，直至程序结束</strong>。<br> 程序无法确切指定类加载的时间。 但是，可保证进行加载，以及在程序中首次引用类之前初始化其字段并调用其静态构造函数。 静态构造函数只调用一次，在程序所驻留的应用程序域的生存期内，静态类会保留在内存中。<br>静态类的主要功能：  </p>
<pre><code>1. 只包含静态成员。  
2. 无法进行实例化。  （与私有构造函数机制类似）
3. 会进行密封seal，不能被继承，不能继承自任何类（除了 Object）。  
4. 不能包含实例构造函数，但可包含静态构造函数。 如果在非静态类中包含需要进行重要的初始化的的静态成员，也需要声明为静态构造函数。


    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    namespace ConsoleApplication1
    {
        class Program
        {
            static void Main(string[] args)
            {
                StaticTest A, B;//定义类的变量
                A = new StaticTest();//创建类的实例A
                B = new StaticTest();//创建类的实例B
                StaticTest.stal = StaticTest.stal + 10;//通过类名给静态变量赋值
                A.a2 = A.a2 + 10;//给实例A的成员A2赋值
                StaticTest.stal = StaticTest.stal + 10;//通过类名给静态变量赋值
                B.a2 = B.a2 + 20;//给实例B的成员赋值
                Console.WriteLine(&quot;StaticTest.stal+{0},A.a2={1}&quot;, StaticTest.stal, A.a2);//输出静态变量和实例A的成员a2的值
                Console.WriteLine(&quot;StaticTest.stal+{0},B.a2={1}&quot;, StaticTest.stal, B.a2);//输出静态变量和实例B的成员a2的值
                Console.ReadKey();

            }
        }
        class StaticTest
        {
            public static int stal = 10;//定义静态变量
            public int a2 = 10;//定义实例变量
        }

    }
</code></pre><p><img src="http://img.my.csdn.net/uploads/201303/22/1363961108_6995.jpg" alt=""></p>
<h2 id="3-static-静态构造函数"><a href="#3-static-静态构造函数" class="headerlink" title="3. static 静态构造函数"></a>3. static 静态构造函数</h2><p>&ensp;&ensp;&ensp;&ensp;静态构造函数用于<strong>初始化任何静态数据</strong>，或执行仅需执行一次的特定操作。 将在创建第一个实例或引用任何静态成员之前<strong>自动调用静态构造函数。</strong></p>
<pre><code>class SimpleClass
{
    // Static variable that must be initialized at run time.
    static readonly long baseline;

    // Static constructor is called at most one time, before any
    // instance constructor is invoked or member is accessed.
    static SimpleClass()
    {
        baseline = DateTime.Now.Ticks;
    }
}
</code></pre><p>静态构造函数具有以下属性：  </p>
<ol>
<li>静态构造函数不使用访问修饰符或不具有参数。  </li>
<li>在创建第一个实例或引用任何静态成员之前，将自动调用静态构造函数以初始化类。  </li>
<li>不能直接调用静态构造函数。  </li>
<li>用户无法控制在程序中执行静态构造函数的时间。  </li>
<li>静态构造函数只执行一次  </li>
<li>静态构造函数的一种典型用法是在类使用日志文件且将构造函数用于将条目写入到此文件中时使用。   </li>
<li>静态构造函数对于创建非托管代码的包装类也非常有用，这种情况下构造函数可调用 LoadLibrary 方法。  </li>
<li>如果静态构造函数引发异常，运行时将不会再次调用该函数，并且类型在程序运行所在的应用程序域的生存期内将保持未初始化。</li>
</ol>
<h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><blockquote>
<p><a href="http://www.cnblogs.com/linuxnotes/archive/2013/05/24/3096145.html" target="_blank" rel="external">http://www.cnblogs.com/linuxnotes/archive/2013/05/24/3096145.html</a><br><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/classes-and-structs/static-classes-and-static-class-members" target="_blank" rel="external">https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/classes-and-structs/static-classes-and-static-class-members</a><br><a href="http://blog.csdn.net/xifeijian/article/details/8708252" target="_blank" rel="external">http://blog.csdn.net/xifeijian/article/details/8708252</a><br><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/classes-and-structs/static-constructors" target="_blank" rel="external">https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/classes-and-structs/static-constructors</a><br>C#程序设计及应用教程 v3 马骏</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/static/">static</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-C-设计模式之单例模式入门" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/14/C-设计模式之单例模式入门/" class="article-date">
      <time datetime="2017-08-14T03:33:44.000Z" itemprop="datePublished">2017-08-14</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/14/C-设计模式之单例模式入门/">C#设计模式之单例模式入门</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h3><p>&ensp;&ensp;&ensp;&ensp;之前用单线程写了一个socket收发数据的小demo，只实现了发送数据后，接收返回的数据，无法进行发送之后，主动接受数据。后来看过单利模式相关的知识点后，就基本上解决了这个问题。  </p>
<h3 id="二、单例模式的介绍"><a href="#二、单例模式的介绍" class="headerlink" title="二、单例模式的介绍"></a>二、单例模式的介绍</h3><p>&ensp;&ensp;&ensp;&ensp;说到单例模式,大家第一反应应该就是——什么是单例模式？，从“单例”字面意思上理解为——一个类只有一个实例，所以单例模式也就是<strong>保证一个类只有一个实例的一种实现方法</strong>罢了(设计模式其实就是帮助我们解决实际开发过程中的方法, 该方法是为了降低对象之间的耦合度,然而解决方法有很多种,所以前人就总结了一些常用的解决方法为书籍,从而把这本书就称为设计模式)，下面给出单例模式的一个官方定义：<strong>确保一个类只有一个实例,并提供一个全局访问点。</strong>为了帮助大家更好地理解单例模式,大家可以结合下面的类图来进行理解,以及后面也会剖析单例模式的实现思路:<br><img src="http://images.cnitblog.com/blog/383187/201307/11215118-5097830af9ab438e986aab807a2a33ca.png" alt=""></p>
<h3 id="三、为什么会有单例模式"><a href="#三、为什么会有单例模式" class="headerlink" title="三、为什么会有单例模式"></a>三、为什么会有单例模式</h3><p>&ensp;&ensp;&ensp;&ensp;看完单例模式的介绍,自然大家都会有这样一个疑问——为什么要有单例模式的？它在什么情况下使用的？从单例模式的定义中我们可以看出——单例模式的使用自然是当我们的系统中某个对象只需要一个实例的情况，例如:操作系统中只能有一个任务管理器,操作文件时,同一时间内只允许一个实例对其操作等,既然现实生活中有这样的应用场景,自然在软件设计领域必须有这样的解决方案了(因为软件设计也是现实生活中的抽象)，所以也就有了单例模式了。  </p>
<h3 id="四、剖析单例模式的实现思路"><a href="#四、剖析单例模式的实现思路" class="headerlink" title="四、剖析单例模式的实现思路"></a>四、剖析单例模式的实现思路</h3><p>&ensp;&ensp;&ensp;&ensp;了解完了一些关于单例模式的基本概念之后，下面就为大家剖析单例模式的实现思路的，因为在我自己学习单例模式的时候，咋一看单例模式的实现代码确实很简单，也很容易看懂，但是我还是觉得它很陌生（这个可能是看的少的，或者自己在写代码中也用的少的缘故），而且心里总会这样一个疑问——为什么前人会这样去实现单例模式的呢？他们是如何思考的呢？后面经过自己的琢磨也就慢慢理清楚单例模式的实现思路了，并且此时也不再觉得单例模式陌生了，下面就分享我的一个剖析过程的：</p>
<p>&ensp;&ensp;&ensp;&ensp;我们从单例模式的概念（确保一个类只有一个实例,并提供一个访问它的全局访问点）入手，可以把概念进行拆分为两部分：</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp; <strong>1. 确保一个类只有一个实例；</strong><br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp; <strong>2. 提供一个访问它的全局访问点；</strong></p>
<p>&ensp;&ensp;&ensp;&ensp;下面通过采用两人对话的方式来帮助大家更快掌握分析思路：</p>
<pre><code>菜鸟：怎样确保一个类只有一个实例了？

老鸟：那就让我帮你分析下，你创建类的实例会想到用什么方式来创建的呢？

新手：用new关键字啊，只要new下就创建了该类的一个实例了，之后就可以使用该类的  
     一些属性和实例方法了            
老鸟：那你想过为什么可以使用new关键字来创建类的实例吗？

菜鸟：这个还有条件的吗？........., 哦，我想起来了，如果类定义私有的构造函数  
     就不能在外界通过new创建实例了（注：有些初学者就会问，有时候我并没有在类
     中定义构造函数为什么也可以使用new来创建对象，那是因为编译器在背后做了手
     脚了，当编译器看到我们类中没有定义构造函数，此时编译器会帮我们生成一个公
     有的无参构造函数）

老鸟：不错，回答的很对，这样你的疑惑就得到解答了啊

菜鸟：那我要在哪里创建类的实例了？

老鸟：你傻啊，当然是在类里面创建了（注：这样定义私有构造函数就是上面的一个思考
     过程的，要创建实例，自然就要有一个变量来保存该实例把，所以就有了私有变量
     的声明,但是实现中是定义静态私有变量,朋友们有没有想过——这里为什么定义为静
     态的呢?对于这个疑问的解释为：每个线程都有自己的线程栈，定义为静态主要是为
     了在多线程确保类有一个实例）            
菜鸟：哦，现在完全明白了，但是我还有另一个疑问——现在类实例创建在类内部，那外界  
     如何获得该的一个实例来使用它了？            
老鸟：这个，你可以定义一个公有方法或者属性来把该类的实例公开出去了（注：这样就
       有了方法的定义了，该方法就是提供方法问类的全局访问点）
</code></pre><p>&ensp;&ensp;&ensp;&ensp;通过上面的分析，相信大家也就很容易写出单例模式的实现代码了，下面就看看具体的实现代码（看完之后你会惊讶道：真是这样的！）：</p>
<pre><code>/// &lt;summary&gt;
/// 单例模式的实现
/// &lt;/summary&gt;
public class Singleton
{
    // 定义一个静态变量来保存类的实例
    private static Singleton uniqueInstance;

    // 定义私有构造函数，使外界不能创建该类实例
    private Singleton()
    {
    }

    /// &lt;summary&gt;
    /// 定义公有方法提供一个全局访问点,同时你也可以定义公有属性来提供全局访问点
    /// &lt;/summary&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Singleton GetInstance()
    {
        // 如果类的实例不存在则创建，否则直接返回
        if (uniqueInstance == null)
        {
            uniqueInstance = new Singleton();
        }
        return uniqueInstance;
    }
}  
</code></pre><p>&ensp;&ensp;&ensp;&ensp;上面的单例模式的实现在单线程下确实是完美的,然而在多线程的情况下会得到多个Singleton实例,因为在两个线程同时运行GetInstance方法时，此时两个线程判断(uniqueInstance ==null)这个条件时都返回真，此时两个线程就都会创建Singleton的实例，这样就违背了我们单例模式初衷了，既然上面的实现会运行多个线程执行，那我们对于多线程的解决方案自然就是使GetInstance方法在同一时间只运行一个线程运行就好了，也就是我们线程同步的问题了(对于线程同步大家也可以参考我线程同步的文章),具体的解决多线程的代码如下:</p>
<pre><code>/// &lt;summary&gt;
/// 单例模式的实现
/// &lt;/summary&gt;
public class Singleton
{
    // 定义一个静态变量来保存类的实例
    private static Singleton uniqueInstance;

    // 定义一个标识确保线程同步
    private static readonly object locker = new object();

    // 定义私有构造函数，使外界不能创建该类实例
    private Singleton()
    {
    }

    /// &lt;summary&gt;
    /// 定义公有方法提供一个全局访问点,同时你也可以定义公有属性来提供全局访问点
    /// &lt;/summary&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Singleton GetInstance()
    {
        // 当第一个线程运行到这里时，此时会对locker对象 &quot;加锁&quot;，
        // 当第二个线程运行该方法时，首先检测到locker对象为&quot;加锁&quot;状态，该线程就会挂起等待第一个线程解锁
        // lock语句运行完之后（即线程运行完之后）会对该对象&quot;解锁&quot;
        lock (locker)
        {
            // 如果类的实例不存在则创建，否则直接返回
            if (uniqueInstance == null)
            {
                uniqueInstance = new Singleton();
            }
        }

        return uniqueInstance;
    }
}
</code></pre><p>&ensp;&ensp;&ensp;&ensp;上面这种解决方案确实可以解决多线程的问题,但是上面代码对于每个线程都会对线程辅助对象locker加锁之后再判断实例是否存在，对于这个操作完全没有必要的，因为当第一个线程创建了该类的实例之后，后面的线程此时只需要直接判断（uniqueInstance==null）为假，此时完全没必要对线程辅助对象加锁之后再去判断，所以上面的实现方式增加了额外的开销，损失了性能，为了改进上面实现方式的缺陷，我们只需要在lock语句前面加一句（uniqueInstance==null）的判断就可以避免锁所增加的额外开销，这种实现方式我们就叫它 “双重锁定”，下面具体看看实现代码的：</p>
<pre><code>/// &lt;summary&gt;
/// 单例模式的实现
/// &lt;/summary&gt;
public class Singleton
{
    // 定义一个静态变量来保存类的实例
    private static Singleton uniqueInstance;

    // 定义一个标识确保线程同步
    private static readonly object locker = new object();

    // 定义私有构造函数，使外界不能创建该类实例
    private Singleton()
    {
    }

    /// &lt;summary&gt;
    /// 定义公有方法提供一个全局访问点,同时你也可以定义公有属性来提供全局访问点
    /// &lt;/summary&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public static Singleton GetInstance()
    {
        // 当第一个线程运行到这里时，此时会对locker对象 &quot;加锁&quot;，
        // 当第二个线程运行该方法时，首先检测到locker对象为&quot;加锁&quot;状态，该线程就会挂起等待第一个线程解锁
        // lock语句运行完之后（即线程运行完之后）会对该对象&quot;解锁&quot;
        // 双重锁定只需要一句判断就可以了
        if (uniqueInstance == null)
        {
            lock (locker)
            {
                // 如果类的实例不存在则创建，否则直接返回
                if (uniqueInstance == null)
                {
                    uniqueInstance = new Singleton();
                }
            }
        }
        return uniqueInstance;
    }
}
</code></pre><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><blockquote>
<p><a href="http://www.cnblogs.com/zhili/p/DesignPatternSummery.html" target="_blank" rel="external">http://www.cnblogs.com/zhili/p/DesignPatternSummery.html</a> (以后直接看)<br><a href="http://www.cnblogs.com/zhili/p/SingletonPatterm.html" target="_blank" rel="external">http://www.cnblogs.com/zhili/p/SingletonPatterm.html</a></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-内存管理入门" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/12/内存管理入门/" class="article-date">
      <time datetime="2017-08-12T07:49:07.000Z" itemprop="datePublished">2017-08-12</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/12/内存管理入门/">C#内存管理入门</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>   &ensp;&ensp;一直以来对内存泄漏、内存溢出不太关心，而且认为 C# 的垃圾回收机制已经很完善了，所以在写代码时对之并不关心。后来被问及相关知识，就嘎屁了。<br>&ensp;&ensp;C# 语言的一个好处是不需要考虑对内存的分配和释放。我们只需要创建对象，然后通过垃圾回收机制（GC）来处理这些对象，即：应用程序会自动清理当不再使用的对象。  </p>
<ul>
<li>垃圾收集器的工作就是寻找那些不再被应用程序需要的对象，当它们不会再被访问或引用的时候清除它们。（一定要注意是在不会再被访问或引用的时候才清除它们）  </li>
<li>一个对象只有当它不再被引用的时候才会被当作是无用的</li>
</ul>
<h3 id="内存溢出"><a href="#内存溢出" class="headerlink" title="内存溢出"></a>内存溢出</h3><p>&ensp;&ensp;&ensp;&ensp;指程序在运行过程中，<strong>程序对内存的需求超过计算机分配给程序的内存</strong>，从而造成“out of memory”之类的错误，使程序崩溃死亡  </p>
<h3 id="内存泄漏"><a href="#内存泄漏" class="headerlink" title="内存泄漏"></a>内存泄漏</h3><p>&ensp;&ensp;&ensp;&ensp;指由于疏忽或错误造成<strong>程序不能及时释放不再使用的内存</strong>，是应用程序分配某段内存后，由于某种原因而<strong>失去对该段内存的控制</strong></p>
<h3 id="托管资源"><a href="#托管资源" class="headerlink" title="托管资源"></a>托管资源</h3><p>&ensp;&ensp;&ensp;&ensp;托管资源指的是.NET可以自动进行回收的资源，主要是指托管堆上分配的内存资源。托管资源的回收工作是不需要人工干预的，有.NET运行库在合适调用垃圾回收器进行回收</p>
<h3 id="非托管资源"><a href="#非托管资源" class="headerlink" title="非托管资源"></a>非托管资源</h3><p>&ensp;&ensp;&ensp;&ensp;非托管资源指的是.NET不知道如何回收的资源，最常见的一类非托管资源是包装操作系统资源的对象，例如文件，窗口，网络连接，数据库连接，画刷，图标等。这类资源，垃圾回收器在清理的时候会调用Object.Finalize()方法。默认情况下，方法是空的，对于非托管对象，需要在此方法中编写回收非托管资源的代码，以便垃圾回收器正确回收资源。</p>
<h3 id="对象创建的过程"><a href="#对象创建的过程" class="headerlink" title="对象创建的过程"></a>对象创建的过程</h3><pre><code>A a = new A();
</code></pre><p> 创建A的对象并对其进行初始化。<br>&ensp;&ensp;A：类；<br>&ensp;&ensp;new A()：创建A的对象并对其初始化；<br>&ensp;&ensp;a：引用，指向new A()这个对象的引用。<br>&ensp;&ensp;注意：a不是A的对象，new A()才是A的对象。  </p>
<ol>
<li>为字段分配内存并进行初始化；</li>
<li>如果类是第一次加载（即系统中从未创建类的其它对象，或者曾经创建但因不再有引用而被 GC 全部回收），则 Copy 其实例方法至方法表；</li>
<li>为类中需要直接赋值的字段赋值；</li>
<li>执行构造函数。  </li>
</ol>
<h3 id="栈和托管堆"><a href="#栈和托管堆" class="headerlink" title="栈和托管堆"></a>栈和托管堆</h3><ul>
<li>对象的分配是在托管堆中执行的，  </li>
<li>栈只是存储对对象的引用。  </li>
<li>当栈在执行过程中，如果释放了对对象的引用，垃圾回收会开始回收引用计数为0的对象占用的内存。<br>&ensp;&ensp;&ensp;&ensp;托管堆是以应用程序域为依托的，即每一个应用程序域有一个托管堆，每一个托管堆也只属于一个应用程序域，且托管堆是一块连续的内存，其中的对象也是紧密排列的。相对于C++中的非连续内存堆来说，托管堆的内存分配效率要高。托管堆维护了一个指针，指向当前已使用内存的末尾，当需要分配内存的时候，只需要指针向后移动指定数量的位置即可。而且托管堆通过应用程序域实现了应用程序之间内存的隔离，即不同的应用程序域之间在正常情况下是不能相互访问各自的托管堆的。</li>
</ul>
<p>##</p>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>&ensp;&ensp;&ensp;&ensp;.net自带内存回收机制。说的更直接一些，就是我们使用 new 运算符创建对象时，运行库都从托管堆为该对象分配内存。而在该对象离开他的生存期后自然就被释放了。我们并没有参与其中的操作。但是往往这样，还是不够。因为.NET的GC机制有这样两个问题：<br>首先，GC并不是能释放所有的资源。它不能自动释放非托管资源。<br>其次，GC并不是实时性的，这将会造成系统性能上的瓶颈和不确定性。<br>因此我们还可以了解以下方式。</p>
<h3 id="1、引用计数"><a href="#1、引用计数" class="headerlink" title="1、引用计数"></a>1、引用计数</h3><p>&ensp;&ensp;引用计数是指，针对每一个对象，保存一个对该对象的引用计数，该对象的引用增加，则相应的引用计数增加。如果对象的引用计数为零，则回收该对象。</p>
<p>&ensp;&ensp;&ensp;&ensp;优点：引用计数最大的优点就是容易实现。二是成本小，基本上引用计数为0的时候垃圾会被立即回收，而其他方法难以预测对象的生命周期，垃圾存在的时间都会比这个方法高。另，这种垃圾回收方式产生的中断时间最短。</p>
<p>&ensp;&ensp;&ensp;&ensp;缺点：最著名的缺点就是如果对象中存在循环引用，就无法被回收。例如，下面三个对象互相引用，但是不存在从根（Root）指向的引用，所以已经是垃圾了。但是引用计数不为0.</p>
<p>这里写图片描述<img src="http://img.voidcn.com/vcimg/000/003/516/470_ebe_f5c.jpg" alt=""></p>
<h3 id="2、标记清除法-mark-weep"><a href="#2、标记清除法-mark-weep" class="headerlink" title="2、标记清除法(mark-weep)"></a>2、标记清除法(mark-weep)</h3><p>&ensp;&ensp;&ensp;&ensp;C#中采用的是标记法回收内存，全部对象都要标记，并且只标记一次就不再标记。判断一个对象是不是垃圾取决于是否有引用，而是取决是是否被root引用。</p>
<h3 id="3、手动进行垃圾回收（GC-Garbagecollection"><a href="#3、手动进行垃圾回收（GC-Garbagecollection" class="headerlink" title="3、手动进行垃圾回收（GC(Garbagecollection)"></a>3、手动进行垃圾回收（GC(Garbagecollection)</h3><p>如上文所说，GC并不是实时性的，这将会造成系统性能上的瓶颈和不确定性。所以有了IDisposable接口，IDisposable接口定义了Dispose方法，这个方法用来供程序员显式调用以释放非托管资源。或使用using语句可以简化资源管理。</p>
<p>##</p>
<h5 id="ensp-ensp-1-在声明对象和定义变量的时候最好是在定义的时候-给一个NUll，如果-到本行代码以后不会再使用这个对象了，-请把它设置为Null"><a href="#ensp-ensp-1-在声明对象和定义变量的时候最好是在定义的时候-给一个NUll，如果-到本行代码以后不会再使用这个对象了，-请把它设置为Null" class="headerlink" title="&ensp;&ensp;1.在声明对象和定义变量的时候最好是在定义的时候 给一个NUll，如果 到本行代码以后不会再使用这个对象了， 请把它设置为Null"></a>&ensp;&ensp;1.在声明对象和定义变量的时候最好是在定义的时候 给一个NUll，如果 到本行代码以后不会再使用这个对象了， 请把它设置为Null</h5><pre><code>private DataTable _dt_two = new DataTable(); 
private DataTable _dt_officeInfo = new DataTable();  
</code></pre><p>&ensp;&ensp;这样做很明显是不合理的，因为你也不知道在使用的过程 中到低会不会加载数据，当然这样确定 不会再出现未对对象引用到对象实例这样的错误 了，当然也说明了一个问题，这样做是不合理的，正确的应该是这样</p>
<pre><code>// 全局声明
private DataTable _dt_two = null;
private DataTable _dt_officeInfo = null;

// 使用时实例化
_dt_two =getDataTable();
_dt_officeInfo =getDataTable();

// 不再使用数据
_dt_two =null;//
_dt_officeInfo =null

GC.Collect();
GC.WaitForPendingFinalizers();
</code></pre><p>&ensp;&ensp;而当使用的时候 再给其真正的值。<br>&ensp;&ensp;其实比较常见的有一点：<br>&ensp;&ensp;A的方法挂了B的事件， 而在A需要被释放的时候却没有摘掉事件。<br>&ensp;&ensp;那么A就不会被回收。<br>&ensp;&ensp;因为A在挂B的时间的时候 ，在B里面保存了一个A的引用。<br>&ensp;&ensp;其他的情况下很少有不能回收的。<br>&ensp;&ensp;不能回收， 说明这东西还有用。 不是垃圾。  </p>
<p>##</p>
<h5 id="ensp-ensp-2-静态变量、集合"><a href="#ensp-ensp-2-静态变量、集合" class="headerlink" title="&ensp;&ensp;2.静态变量、集合"></a>&ensp;&ensp;2.静态变量、集合</h5><p>&ensp;&ensp;&ensp;&ensp;对于集合，我们在使用完成之后，需要即时的clear，尤其是将一些方法中的临时变量添加到集合当中之后，会导致集合膨胀，并使得其中的内存泄露。<br>&ensp;&ensp;&ensp;&ensp;对于静态字段，我们应该尽量减少其可见的域，因为静态字段在整个程序运行期间都不会被释放，减少其可见域就减少了其内存泄露的可能性，注意，不到万不得以，千万不要声明静态的集合，就是使用了，那也一定要小心再小心。静态集合很容易造成内存泄露。</p>
<p>##</p>
<h5 id="ensp-ensp-4-非托管资源回收机制-例子"><a href="#ensp-ensp-4-非托管资源回收机制-例子" class="headerlink" title="&ensp;&ensp;4.非托管资源回收机制 例子"></a>&ensp;&ensp;4.非托管资源回收机制 例子</h5><p>&ensp;&ensp;&ensp;&ensp;析构函数是一种用于实现销毁类实例所操作的成员的函数。析构函数不能带参数，也不能包含访问修饰符。另外，析构函数<strong>是自动调用有的</strong>，不能显示调用。由于GC相对来说已经很完善，所以只在某些特殊的高级开发中才需要声明的。<br>&ensp;&ensp;&ensp;&ensp;如果声明析构函数，开发人员可通过System.GC的静态方法在一定程度上控制垃圾回收行为。该类可用于请求执行一次回收操作，并<strong>自动用于请求是否该执行</strong>析构函数</p>
<pre><code> A a=null;
try
{
    a=new A();
}
finally
{
    if(a!=null)
    {
        a.Dispose();
    }
}
</code></pre><p>&ensp;&ensp;&ensp;&ensp;即使处理过程中出现异常，可以确保在a上调用 Dispose();方法，总是释放a使用的任意资源</p>
<p>##</p>
<pre><code>Public class BaseResource:IDisposable
{
    PrivateIntPtr handle; // 句柄，属于非托管资源
    PrivateComponet comp; // 组件，托管资源
    Privateboo isDisposed = false; // 是否已释放资源的标志

    PublicBaseResource
    {
    }

    //实现接口方法
    //由类的使用者，在外部显示调用，释放类资源
    Publicvoid Dispose()
    {
        Dispose(true);// 释放托管和非托管资源

        //将对象从垃圾回收器链表中移除，
        // 从而在垃圾回收器工作时，只释放托管资源，而不执行此对象的析构函数
        GC.SuppressFinalize(this);
    }

    //由垃圾回收器调用，释放非托管资源
    ~BaseResource()
    {
        Dispose(false);// 释放非托管资源
    }

    //参数为true表示释放所有资源，只能由使用者调用
    //参数为false表示释放非托管资源，只能由垃圾回收器自动调用
    //如果子类有自己的非托管资源，可以重载这个函数，添加自己的非托管资源的释放
    //但是要记住，重载此函数必须保证调用基类的版本，以保证基类的资源正常释放
    Protectedvirtual void Dispose(bool disposing)
    {
        If(!this.disposed)// 如果资源未释放 这个判断主要用了防止对象被多次释放
        {
            If(disposing)
            {
                Comp.Dispose();// 释放托管资源
            }
            closeHandle(handle);// 释放非托管资源
            handle= IntPtr.Zero;
        }
        this.disposed= true; // 标识此对象已释放
    }
}
</code></pre><p>##</p>
<pre><code>class A
{
    ~A(){Console.WriteLine(&quot;这是析构函数&quot;)}
}
class Test
{
    static void Main()
    {
        A a=new A();
        a=null;
        GC.Collect();
        GC.WaitForPendingFinalizers();
    }
}
</code></pre><p>##</p>
<h5 id="ensp-ensp-5-using-statement"><a href="#ensp-ensp-5-using-statement" class="headerlink" title="&ensp;&ensp; 5.using()    { / statement / }"></a>&ensp;&ensp; 5.using()    { /<em> statement </em>/ }</h5><p>&ensp;&ensp;&ensp;&ensp;using语句的后面有一对圆括号，用于应用变量的声明和实例化，该语句使得变量放在随后的语句块中。另外，变量在超出作用域后，即使出现异常，也会自动调用Dispose()方法.<br>&ensp;&ensp;&ensp;&ensp;对于某些类，使用Close()方法要比Dispose()方法更具有逻辑性。例如，在处理文件或数据库时就是这样。在这些情况下，常常实现IDispose()接口，在实现一个独立的Close()方法，Close()方法只调用Dispose()方法，还可以避免额外的代码缩进。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><blockquote>
<p><a href="http://blog.csdn.net/fhzh520/article/details/7872305" target="_blank" rel="external">http://blog.csdn.net/fhzh520/article/details/7872305</a><br><a href="http://www.cnblogs.com/sufei/archive/2010/01/18/1650257.html" target="_blank" rel="external">http://www.cnblogs.com/sufei/archive/2010/01/18/1650257.html</a><br><a href="http://blog.jobbole.com/89064/" target="_blank" rel="external">http://blog.jobbole.com/89064/</a><br>《C#程序设计及应用教程》 V3   马骏<br>《C#高级教程》 v7</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/内存管理/">内存管理</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JavaScript变量提升、函数提升" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/27/JavaScript变量提升、函数提升/" class="article-date">
      <time datetime="2017-07-27T01:19:41.000Z" itemprop="datePublished">2017-07-27</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/27/JavaScript变量提升、函数提升/">JavaScript变量提升、函数提升</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>查到一篇写的简单易懂，索性就直接用了，另做了部分补充</p>
<p>前言<br>因为我在写这文章的时候，百度里找资料，找到了园友的一篇文章，写的很好，可是我写了又不想放弃，所以就在里面拿了很多东西过来！~~</p>
<p>[翻译]JavaScript Scoping and Hoisting</p>
<p>希望得到大家谅解。</p>
<p>因为这个问题很是经典，而且容易出错，所以在介绍一次。哈哈。莫怪哦。</p>
<p>一。案发现场<br>我们先看一段很简单的代码：</p>
<pre><code>var v=&apos;Hello World&apos;;
alert(v);
</code></pre><p> 这个没有疑问吧，弹出“Hello World”。OK，我们继续。</p>
<p>我们在看一段Code：</p>
<pre><code>var v=&apos;Hello World&apos;;
(function(){
    alert(v);
})()
</code></pre><p>经过运行之后，我们发现，还是和我们预期的一样，弹出了“Hello World”。</p>
<p>好了，有意思的来了。接着在看一段下面的代码：</p>
<pre><code>var v=&apos;Hello World&apos;;
(function(){
    alert(v);
    var v=&apos;I love you&apos;;
})()
</code></pre><p>如果这个是一个面试题，面试官问你这个结果是多少？你怎么回答？</p>
<p>我们先看结果吧！</p>
<p><img src="http://pic002.cnblogs.com/images/2012/282564/2012061823591233.png" alt=""></p>
<p>结果是 undefined？和你上面自己想的一样吗？</p>
<p>好吧，我就不故弄玄虚了。其实，这里面隐藏了一个陷阱—–JavaScript中的变量提升（Hoisting）；</p>
<p>二。深度剖析<br>现在我来解释下提升是什么意思？顾名思义，就是把下面的东西提到上面。在JS中，就是把定义在后面的东东（变量或函数）提升到前面中定义。</p>
<p>在解释提升之前，我们先来看一下js中的作用域（scoping）问题。</p>
<p>对于JavaScript新手来说scoping是最令人困惑的部分之一。事实上，不仅仅是新手，我遇到或很多有经验的JavaScript程序员也不能完全理解scoping。JavaScript的scoping如此复杂的原因是它看上去非常像C系语言的成员。请看下面的C程序：</p>
<p>复制代码</p>
<pre><code>#include &lt;stdio.h&gt;
    int main() {
    int x = 1;
    printf(&quot;%d, &quot;, x); // 1
    if (1) {
        int x = 2;
        printf(&quot;%d, &quot;, x); // 2
     }
    printf(&quot;%d\n&quot;, x); // 1
}
</code></pre><p>复制代码<br>这段程序的输出是1,2,1。这是因为在C系语言有块级作用域(block-level scope),当进入到一个块时，就像if语句，在这个块级作用域中会声明新的变量，这些变量不会影响到外部作用域。但是JavaScript却不是这样。在Firebug中试试下面的代码：</p>
<p>复制代码</p>
<pre><code> var x = 1;
    console.log(x); // 1
 if (true) {
   var x = 2;
   console.log(x); //2
}
 console.log(x);// 2
</code></pre><p>复制代码<br>在这段代码中，Firebug显示1，2,2。这是因为JavaScript是函数级作用域(function-level scope)。这和C系语言是完全不同的。块，就像if语句，并不会创建一个新的作用域。只有函数才会创建新的作用域。</p>
<p>对于大部分熟悉C，C++，C#或是Java的程序员来说，这是意料之外并且不被待见的。幸运的是，因为JavaScript函数的灵活性，对于这个问题我们有一个解决方案。如果你必须在函数中创建一个临时的作用域，请像下面这样做：</p>
<p>复制代码</p>
<pre><code>function foo() {
    var x = 1;
    if (x) {
        (function () {
            var x = 2;
            // some other code
        }());
    }
    // x is still 1.
}
</code></pre><p>复制代码<br>这种方面确实非常灵活，它使用在任何需要创建一个临时作用域的地方，不仅仅是某个块中。但是，我强烈建议你花点时间好好理解下JavaScript scoping。它实在是非常强力，而且它也是我最喜欢的语言特性之一。如果你很好的理解了scoping，理解hoisting将会更加容易。</p>
<p>2.1变量提升<br>变量提升，很简单，就是把变量提升提到函数的top的地方。我么需要说明的是，变量提升 只是提升变量的声明，并不会把赋值也提升上来。</p>
<p>比如：</p>
<p>我们定义三个变量：</p>
<pre><code>(function(){
    var a=&apos;One&apos;;
    var b=&apos;Two&apos;;
    var c=&apos;Three&apos;;
})()
</code></pre><p>实际上它是这样子的：</p>
<p>复制代码</p>
<pre><code>(function(){
    var a,b,c;
    a=&apos;One&apos;;
    b=&apos;Two&apos;;
    c=&apos;Three&apos;;
</code></pre><p>})()<br>复制代码<br>这个时候就把变量提升了呀。</p>
<p>好，我们现在回到第一段code里面。为什么会报错呢？其实，根据我么根据上面变量提升原件以及js的作用域（块级作用域）的分析，得知 上面代码真正变成如下：</p>
<p>复制代码</p>
<pre><code>var v=&apos;Hello World&apos;;
(function(){
    var v;
    alert(v);
    v=&apos;I love you&apos;;
})()
</code></pre><p>复制代码<br>所以，才会提示说“undefined”。</p>
<p>从这里，我们也学习到，我们在写js code 的时候，我么需要把变量放在函数级作用域的顶端，比如我在上面所举的例子：var a,b,c;。以防止出现意外。</p>
<p>2.2 函数提升<br>函数提升是把整个函数都提到前面去。</p>
<p>在我们写js code 的时候，我们有2中写法，一种是函数表达式，另外一种是函数声明方式。我们需要重点注意的是，只有函数声明形式才能被提升。</p>
<p>函数声明方式提升【成功】</p>
<p>复制代码</p>
<pre><code>function myTest(){
    foo();
    function foo(){
        alert(&quot;我来自 foo&quot;);
    }
}
myTest();
</code></pre><p>复制代码<br>函数表达式方式提升【失败】</p>
<p>复制代码</p>
<pre><code>function myTest(){
    foo();
   var foo =function foo(){
        alert(&quot;我来自 foo&quot;);
    }
}
myTest();
</code></pre><p>复制代码<br>结果如下：</p>
<p><img src="http://pic002.cnblogs.com/images/2012/282564/2012070113303998.png" alt=""></p>
<p>左边报错了。没骗你。</p>
<p>应该到这里基本都可以弄懂了。~</p>
<p>Declarations, Names, and Hoisting</p>
<p>在JavaScript中，一个作用域(scope)中的名称(name)有以下四种：</p>
<pre><code>1. 语言自身定义(Language-defined): 所有的作用域默认都会包含this和arguments。

2. 函数形参(Formal parameters): 函数有名字的形参会进入到函数体的作用域中。

3. 函数声明(Function decalrations): 通过function foo() {}的形式。

4. 变量声明(Variable declarations): 通过var foo;的形式。
</code></pre><p>函数声明和变量声明总是被JavaScript解释器隐式地提升(hoist)到包含他们的作用域的最顶端。很明显的，语言自身定义和函数形参已经处于作用域顶端。这就像下面的代码：</p>
<pre><code>1:  function foo() {
2:      bar();
3:      var x = 1;
4:  }
</code></pre><p>实际上被解释成像下面那样：</p>
<pre><code>1:  function foo() {
2:      var x;
3:      bar();
4:      x = 1;
5:  }
</code></pre><p>结果是不管声明是否被执行都没有影响。下面的两段代码是等价的：</p>
<pre><code> 1:  function foo() {
 2:      if (false) {
 3:          var x = 1;
 4:      }
 5:      return;
 6:      var y = 1;
 7:  }
 8:  function foo() {
 9:      var x, y;
10:      if (false) {
11:          x = 1;
12:      }
13:      return;
14:      y = 1;
15:  }
</code></pre><p>注意到声明的赋值部分并没有被提升(hoist)。只有声明的名称被提升了。这和函数声明不同，函数声明中，整个函数体也都会被提升。但是请记住，声明一个函数一般来说有两种方式。考虑下面的JavaScript代码：</p>
<pre><code> 1:  function test() {
 2:      foo(); // TypeError &quot;foo is not a function&quot;
 3:      bar(); // &quot;this will run!&quot;
 4:      var foo = function () { // 函数表达式被赋值给变量&apos;foo&apos;
 5:          alert(&quot;this won&apos;t run!&quot;);
 6:      }
 7:      function bar() { // 名为&apos;bar&apos;的函数声明
 8:          alert(&quot;this will run!&quot;);
 9:      }
10:  }
11:  test();
</code></pre><p>在这里，只有函数声明的方式会连函数体一起提升，而函数表达式中只会提升名称，函数体只有在执行到赋值语句时才会被赋值。</p>
<p>以上就包括了所有关于提升(hoisting)的基础，看起来并没有那么复杂或是令人困惑对吧。但是，这是JavaScript，在某些特殊情况下，总会有那么一点复杂。</p>
<p><strong>Name Resolution Order</strong></p>
<p>需要记住的最最重要的特例就是名称解析顺序(name resolution order)。记住一个名称进入一个作用域一共有四种方式。我上面列出的顺序就是他们解析的顺序。<strong>总的来说，如果一个名称已经被定义了，他绝不会被另一个拥有不用属性的同名名称覆盖。这就意味着，函数声明比变量声明具有更高的优先级。但是这却不意味着对这个名称的赋值无效，仅仅是声明的部分会被忽略而已</strong>。但是有下面几个例外：</p>
<p>内置的名称arguments的行为有些怪异。他似乎是在形参之后，函数声明之前被声明。这就意味着名为arguments的形参会比内置的arguments具有更高的优先级，即使这个形参是undefined。这是一个不好的特性，不要使用arguments作为形参。<br>任何地方试图使用this作为一个标识都会引起语法错误，这是一个好的特性。<br>如果有多个同名形参，那位于列表最后的形参拥有最高的优先级，即使它是undefined。</p>
<p><strong>Name Function Expressions</strong></p>
<p>你可以在函数表达式中给函数定义名称，就像函数声明的语句一样。但这并不会使它成为一个函数声明，并且这个名称也不会被引入到作用域中，而且，函数体也不会被提升(hoist)。这里有一些代码可以说明我说的是什么意思：</p>
<pre><code> 1:  foo(); // TypeError &quot;foo is not a function&quot;
 2:  bar(); // valid
 3:  baz(); // TypeError &quot;baz is not a function&quot;
 4:  spam(); // ReferenceError &quot;spam is not defined&quot;
 5:   
 6:  var foo = function () {}; // 匿名函数表达式(&apos;foo&apos;被提升)
 7:  function bar() {}; // 函数声明(&apos;bar&apos;和函数体被提升)
 8:  var baz = function spam() {}; // 命名函数表达式(只有&apos;baz&apos;被提升)
 9:   
10:  foo(); // valid
11:  bar(); // valid
12:  baz(); // valid
13:  spam(); // ReferenceError &quot;spam is not defined&quot;
</code></pre><p><strong>How to Code With This Knowledge</strong></p>
<p>现在你明白了作用域和提升，那么这对编写JavaScript代码意味着什么呢？最重要的一条是声明变量时总是使用var语句。我强烈的建议你在每个作用域中都只在最顶端使用一个var。如果你强制自己这么做，你永远也不会被提升相关的问题困扰。尽管这么做会使的跟踪当前作用域实际声明了哪些变量变得更加困难。我建议在<strong>JSLint</strong>使用onevar选项。如果你做了所有前面的建议，你的代码看起来会是下面这样：</p>
<pre><code>1:  /*jslint onevar: true [...] */
2:  function foo(a, b, c) {
3:      var x = 1,
4:          bar,
5:          baz = &quot;something&quot;;
6:  }
</code></pre><p><strong>多使用let</strong></p>
<p>第一次接触let关键字，有一个要非常非常要注意的概念就是”JavaScript 严格模式”，比如下述的代码运行就会报错：</p>
<pre><code>let hello = &apos;hello world.&apos;;
console.log(hello);
</code></pre><p>错误信息如下：</p>
<pre><code>let hello = &apos;hello world.&apos;;
^^^

SyntaxError: Block-scoped declarations (let, const, function, class) not yet supported outside strict mode
    ...
</code></pre><p>解决方法就是，在文件头添加”javascript 严格模式”声明：</p>
<pre><code>&apos;use strict&apos;;

let hello = &apos;hello world.&apos;;
console.log(hello);
</code></pre><p>4<br>更多更详细的关于”javascript 严格模式”说明，请参考阮一峰的博客<br><a href="http://www.ruanyifeng.com/blog/2013/01/javascript_strict_mode.html" title="Javascript 严格模式详解" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2013/01/javascript_strict_mode.html</a></p>
<p><strong>let和var关键字的异同</strong></p>
<p>声明后未赋值，表现相同</p>
<pre><code>&apos;use strict&apos;;

(function() {
  var varTest;
  let letTest;
  console.log(varTest); //输出undefined
  console.log(letTest); //输出undefined
}());
</code></pre><p>使用未声明的变量，表现不同:</p>
<pre><code>(function() {
  console.log(varTest); //输出undefined(注意要注释掉下面一行才能运行)
  console.log(letTest); //直接报错：ReferenceError: letTest is not defined

  var varTest = &apos;test var OK.&apos;;
  let letTest = &apos;test let OK.&apos;;
}());
</code></pre><p>重复声明同一个变量时，表现不同：</p>
<pre><code>&apos;use strict&apos;;

(function() {
  var varTest = &apos;test var OK.&apos;;
  let letTest = &apos;test let OK.&apos;;

  var varTest = &apos;varTest changed.&apos;;
  let letTest = &apos;letTest changed.&apos;; //直接报错：SyntaxError: Identifier &apos;letTest&apos; has already been declared

  console.log(varTest); //输出varTest changed.(注意要注释掉上面letTest变量的重复声明才能运行)
  console.log(letTest);
}());
</code></pre><p>变量作用范围，表现不同</p>
<pre><code>&apos;use strict&apos;;

(function() {
  var varTest = &apos;test var OK.&apos;;
  let letTest = &apos;test let OK.&apos;;

  {
    var varTest = &apos;varTest changed.&apos;;
    let letTest = &apos;letTest changed.&apos;;
  }

  console.log(varTest); //输出&quot;varTest changed.&quot;，内部&quot;{}&quot;中声明的varTest变量覆盖外部的letTest声明
  console.log(letTest); //输出&quot;test let OK.&quot;，内部&quot;{}&quot;中声明的letTest和外部的letTest不是同一个变量
}());
</code></pre><p>参考：<br><a href="http://www.cnblogs.com/damonlan/archive/2012/07/01/2553425.html" target="_blank" rel="external">http://www.cnblogs.com/damonlan/archive/2012/07/01/2553425.html</a><br><a href="http://www.cnblogs.com/betarabbit/archive/2012/01/28/2330446.html" target="_blank" rel="external">http://www.cnblogs.com/betarabbit/archive/2012/01/28/2330446.html</a><br><a href="http://blog.csdn.net/nfer_zhuang/article/details/48781671" target="_blank" rel="external">http://blog.csdn.net/nfer_zhuang/article/details/48781671</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NET/">.NET</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-googleaeb6e0d880b4c36a" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/24/googleaeb6e0d880b4c36a/" class="article-date">
      <time datetime="2017-07-24T01:18:54.000Z" itemprop="datePublished">2017-07-24</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/24/googleaeb6e0d880b4c36a/">googleaeb6e0d880b4c36a</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>google-site-verification: googleaeb6e0d880b4c36a.html</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-NET 向Amazon S3批量上传数据" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/22/NET 向Amazon S3批量上传数据/" class="article-date">
      <time datetime="2017-07-22T12:42:22.000Z" itemprop="datePublished">2017-07-22</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/22/NET 向Amazon S3批量上传数据/">.NET 向Amazon S3批量上传数据</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.ihongguang.cn/?p=294" target="_blank" rel="external">.NET 从TELERIK批量获取数据</a></p>
<p>我在上传数据时使用PutObjectRequest类，其中的Key属性有严格限制，稍有不慎就会进坑，而创建一个假文件（48B或48K左右）</p>
<p>&nbsp;</p>
<div>

<pre><code>put.Key=文件夹名+&quot;/&quot;+ 文件名

文件名=本地文件名`&lt;/pre&gt;
&lt;/div&gt;
思路：遍历文件夹，读取所有文件夹、文件夹内文件，使用Task循环上传

&amp;nbsp;
&lt;div&gt;
&lt;pre&gt;`class UploadFilesInAll
{
    /// &amp;lt;summary&amp;gt;
    /// 访问密钥
    /// &amp;lt;/summary&amp;gt;
    private static String accessKeyID = &quot;访问密钥id&quot;;
    /// &amp;lt;summary&amp;gt;
    /// 密钥
    /// &amp;lt;/summary&amp;gt;
    private static String secretKey = &quot;私有访问密钥iD&quot;;
    /// &amp;lt;summary&amp;gt;
    /// 存储桶的名字
    /// &amp;lt;/summary&amp;gt;
    private static String bucketName = &quot;存储桶名字&quot;;
    /// &amp;lt;summary&amp;gt;
    /// 存放上传失败的文件的信息
    /// &amp;lt;/summary&amp;gt;
    private static List&amp;lt;string&amp;gt; errorList = new List&amp;lt;string&amp;gt;();
    /// &amp;lt;summary&amp;gt;
    /// 存放获取到的路径
    /// &amp;lt;/summary&amp;gt;
    static List&amp;lt;string&amp;gt; fileList = new List&amp;lt;string&amp;gt;();
    /// &amp;lt;summary&amp;gt;
    /// 成功个数
    /// &amp;lt;/summary&amp;gt;
    static int successMum = 0;
    /// &amp;lt;summary&amp;gt;
    /// 失败个数
    /// &amp;lt;/summary&amp;gt;
    static int failedNum = 0;
    /// &amp;lt;summary&amp;gt;
    /// file个数
    /// &amp;lt;/summary&amp;gt;
    static int fileCount = 0;
    /// &amp;lt;summary&amp;gt;
    /// folder个数
    /// &amp;lt;/summary&amp;gt;
    static int folderCount = 0;

    /// &amp;lt;summary&amp;gt;
    /// 批量上传文件的主体部分
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;
    public static string UploadAllFiles()
    {
        #region 删除日志文件
        string filePath = AppDomain.CurrentDomain.BaseDirectory + &quot;Log.txt&quot;;
        if (System.IO.File.Exists(filePath))
        {
            System.IO.File.Delete(filePath);
        } 
        #endregion

        string localPath = &quot;&quot;;
        AWSCredentials credentials;
        credentials = new BasicAWSCredentials(accessKeyID.Trim(), secretKey.Trim());
        AmazonS3Client s3Client = new AmazonS3Client(accessKeyID.Trim(), secretKey.Trim(), Amazon.RegionEndpoint.USEast1);
        Console.WriteLine(&quot;验证成功&quot;);
        Console.WriteLine(&quot;检查存储桶是否存在&quot;);
        if (!Program.CheckBucketExists(s3Client, bucketName))
        {
            Console.WriteLine(&quot;正在创建数据桶........&quot;);
            s3Client.PutBucket(bucketName);
            Console.WriteLine(&quot;数据桶创建成功&quot;);
        }

        Dictionary&amp;lt;string, List&amp;lt;string&amp;gt;&amp;gt; fileList = UploadFilesInAll.GetAllFiles(@&quot;E:\telerikFile&quot;);
        WriteLog(&quot;共有&quot; + fileCount + &quot;个文件&quot;);
        // 整理文件的路径,逐个上传
        foreach (var item in fileList)
        {
            string key = item.Key.Substring(item.Key.LastIndexOf(&apos;\\&apos;));
            key = key.Substring(key.LastIndexOf(&apos;\\&apos;) + 1);
            Console.WriteLine(key);
            foreach (var item_ in item.Value)
            {
                localPath = item_;
                string path = item_.Substring(item_.LastIndexOf(&apos;\\&apos;)+1);
                Task.Run(()=&amp;gt; UploadFilesInAll.upload(s3Client, key+&quot;/&quot;+ path, item_));
            }
        }
        try
        {
            Console.WriteLine(&quot;准备上传&quot;);
            return &quot;success&quot;;
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());

            return &quot;failed&quot;;
        }

    }

    /// &amp;lt;summary&amp;gt;
    /// 文件上传部分
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;param name=&quot;s3Client&quot;&amp;gt;Amazon S3服务接口&amp;lt;/param&amp;gt;
    /// &amp;lt;param name=&quot;key&quot;&amp;gt;对象键(文件上传后存储的文件夹/文件)&amp;lt;/param&amp;gt;
    /// &amp;lt;param name=&quot;localFile&quot;&amp;gt;待上传数据存放路径&amp;lt;/param&amp;gt;
    private static void upload(AmazonS3Client s3Client,string key,string localFile)
    {
        Object objLock = new Object();
        lock(objLock)
        {
            try
            {
                // 配置上传信息
                string localPath = localFile;
                PutObjectRequest obj = new PutObjectRequest();
                var fileStream = new FileStream(localPath, FileMode.Open, FileAccess.Read);
                obj.InputStream = fileStream;
                obj.BucketName = bucketName;
                obj.Key = key;
                obj.CannedACL = S3CannedACL.PublicRead;
                Console.WriteLine(&quot;正在上传&quot; + localPath);
                // 默认添加public权限  
                s3Client.PutObject(obj);
                Console.WriteLine(&quot;上传成功第&quot;+ (successMum+1) +&quot;个文件&quot; );
                WriteLog(&quot;上传成功第&quot; + (successMum+1) + &quot;个文件&quot; + localPath);
                successMum++;
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
                Console.WriteLine(&quot;上传失败&quot;+ (failedNum+1) + &quot;个文件&quot; + localFile);
                errorList.Add(localFile);
                //WriteLog(&quot; 失败&quot; + filedNum++ + &quot;个&quot;);
                failedNum++;
                WriteLog(&quot;上传失败&quot; + localFile);
                // return &quot;failed&quot;;
            }
        }
        if(successMum + 1== fileCount)
        {
            Console.WriteLine(&quot;文件已经全部下载，按任意键退出&quot;);
            WriteLog(&quot;文件已经全部下载&quot;);
            Console.ReadKey();
        }

        if(failedNum &amp;gt;=1)
        {
            WriteLog(&quot;当前失败率=&quot; + failedNum * 1.00 / fileCount);
            ShowError(s3Client);
        }
        else
        {
            //WriteLog(&quot;当前失败率=&quot; + failedNum * 1.00 / fileCount);
        }

    }

    /// &amp;lt;summary&amp;gt;
    /// 再次上传主体部分
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;param name=&quot;s3Client&quot;&amp;gt;Amazon S3服务主体部分&amp;lt;/param&amp;gt;
    /// &amp;lt;param name=&quot;failedPath&quot;&amp;gt;&amp;lt;/param&amp;gt;
    private static void uploadAgain(AmazonS3Client s3Client,string failedPath)
    {

        Object objLock = new Object();
        lock (objLock)
        {
            try
            {
                string key = failedPath.Substring(failedPath.LastIndexOf(&apos;\\&apos;));
                key = key.Substring(key.LastIndexOf(&apos;\\&apos;) + 1);

                string localPath = failedPath;
                PutObjectRequest obj = new PutObjectRequest();
                var fileStream = new FileStream(localPath, FileMode.Open, FileAccess.Read);
                obj.InputStream = fileStream;
                obj.BucketName = bucketName;
                obj.Key = key;
                obj.CannedACL = S3CannedACL.PublicRead;
                Console.WriteLine(&quot;正在上传&quot; + localPath);
                // 默认添加public权限  
                s3Client.PutObject(obj);
                Console.WriteLine(&quot;上传成功&quot; + localPath);
                successMum++;
                errorList.Remove(localPath);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
                Console.WriteLine(&quot;上传失败&quot; + failedPath);
                errorList.Add(failedPath);
                failedNum++;
                WriteLog(failedPath);
            }
            if ((failedNum * 1.00 / fileCount) &amp;gt; 0.00)
            {
                WriteLog(&quot;成功下载&quot; + successMum + &quot;个文件，失败&quot; + failedNum + &quot;个文件&quot;);
                ShowError(s3Client);
            }
        }
    }

    /// &amp;lt;summary&amp;gt;
    /// 整理错误信息，准备重新下载之前下载失败的文件
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;param name=&quot;s3Client&quot;&amp;gt;AmazonS3服务实例&amp;lt;/param&amp;gt;
    private static void ShowError(AmazonS3Client s3Client)
    {
        Object objLock = new Object();
        lock (objLock)
        {
            int i = 0;
            string path = &quot;&quot;;
            Console.WriteLine(&quot;当前失败率=&quot; + failedNum * 1.00 / fileCount);
            WriteLog(&quot;当前失败率=&quot; + failedNum * 1.00 / fileCount);
            try
            {
                successMum = 0;
                failedNum = 0;
                foreach (var item in errorList)
                {
                    i++;
                    path = item;
                    Console.WriteLine(item);
                    Task.Run(() =&amp;gt; uploadAgain(s3Client, item));
                }
            }
            catch
            {
                WriteLog(&quot;第&quot;+i+&quot;个失败：&quot; + path);
                Console.WriteLine(&quot;执行错误&quot;);
            }

        }
    }     

    /// &amp;lt;summary&amp;gt;
    /// 获取所有文件的路径
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;param name=&quot;path&quot;&amp;gt;&amp;lt;/param&amp;gt;
    /// &amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;
    public static Dictionary&amp;lt;string, List&amp;lt;string&amp;gt;&amp;gt; GetAllFiles(string path)
     {
        Dictionary&amp;lt;string, List&amp;lt;string&amp;gt;&amp;gt; fileTree = new Dictionary&amp;lt;string, List&amp;lt;string&amp;gt;&amp;gt;();
        List&amp;lt;string&amp;gt; list;
        DirectoryInfo[] folder = new DirectoryInfo(@&quot;E:\telerikFile&quot;).GetDirectories();
        for (int i = 0; i &amp;lt; folder.Length; i++)
        {
            folderCount++;
            list = list = new List&amp;lt;string&amp;gt;();
            for (int j = 0; j &amp;lt; folder[i].GetFiles().Length; j++)
            {
                fileCount++;
                list.Add(folder[i].GetFiles()[j].FullName.ToString());
            }
            fileTree.Add(folder[i].FullName, list);

            // list.Clear();
        }
        WriteLog(&quot;共有&quot;+ folderCount +&quot;个文件夹，&quot;+ fileCount+&quot;个文件&quot;);
        return fileTree;
        //foreach (var dicName in list)
        //{
        //    Console.WriteLine(dicName);
        //    Console.WriteLine(dicName.Count());
        //}
    }

    /// &amp;lt;summary&amp;gt;
    /// 获取指定的根目录的所有子目录名称
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;param name=&quot;path&quot;&amp;gt;指定的根目录&amp;lt;/param&amp;gt;
    /// &amp;lt;returns&amp;gt;子目录名称集合&amp;lt;/returns&amp;gt;
    public static List&amp;lt;string&amp;gt; getPath(string path)
    {
        DirectoryInfo dir = new DirectoryInfo(path);
        FileInfo[] fil = dir.GetFiles();
        DirectoryInfo[] dii = dir.GetDirectories();
        foreach (FileInfo f in fil)
        {
            fileList.Add(f.FullName);//添加文件的路径到列表
        }
        //获取子文件夹内的文件列表，递归遍历
        foreach (DirectoryInfo d in dii)
        {
            getPath(d.FullName);
            fileList.Add(d.FullName);//添加文件夹的路径到列表
        }
        return fileList;
    }

    /// &amp;lt;summary&amp;gt;
    /// 写入文件，做记录测试
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;param name=&quot;str&quot;&amp;gt;&amp;lt;/param&amp;gt;
    private static void WriteLog(string str)
    {
        Task.Run(() =&amp;gt;
        {
            try
            {
                string filePath = AppDomain.CurrentDomain.BaseDirectory + &quot;Log.txt&quot;;
                StreamWriter sw = null;
                if (!System.IO.File.Exists(filePath))
                {
                    sw = System.IO.File.CreateText(filePath);
                }
                else
                {
                    sw = System.IO.File.AppendText(filePath);
                }
                sw.Write(str + Environment.NewLine);//+ DateTime.Now.ToString()
                sw.Close();
            }
            catch (Exception ex)
            {
                ex.ToString();
            }
        });
    }
}
</code></pre><p></p></div><br>&nbsp;<p></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/C/">C#</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JavaScript原型、原型链" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/22/JavaScript原型、原型链/" class="article-date">
      <time datetime="2017-07-22T03:23:47.000Z" itemprop="datePublished">2017-07-22</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/22/JavaScript原型、原型链/">JavaScript原型、原型链</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <ul>
<li><span style="color: #000000;">JS中的对象都<span style="color: #ff0000;">从原型继承属性</span></span></li>
<li><span style="color: #000000;">所有通过对象直接量创建的对象，都具有同一原型对象<span style="color: #ff0000;">object.prototype</span></span></li>
<li>通过Object.prototype获得对原型对象的引用</li>
<li>通过[new]和[构造函数]和[{}]创建的对象的原型===[构造函数]的prototype属性的值</li>
<li>object.prototype无原型对象<br>以下为Date.prototype的部分返回值</li>
</ul>
<p><a href="http://www.ihongguang.cn/wp-content/uploads/2017/07/Date.prototype.png" target="_blank" rel="external"><img src="http://www.ihongguang.cn/wp-content/uploads/2017/07/Date.prototype-300x195.png" alt=""></a></p>
<p>由此，可理解为：对象自带的一组方法、属性，并且可以通过object.prototype进行自定义原型</p>
<h2 id="原型使用方式1："><a href="#原型使用方式1：" class="headerlink" title="原型使用方式1："></a><strong>原型使用方式1：</strong></h2><p>在使用原型之前，我们需要先将代码做一下小修改：</p>
<div class="cnblogs_code"><br><pre>        var Calculator = function (decimalDigits, tax) {<br>            this.decimalDigits = decimalDigits;<br>            this.tax = tax;<br>        };</pre><br></div><br>然后，通过给Calculator对象的prototype属性赋值<strong>对象字面量</strong>来设定Calculator对象的原型。<br><div class="cnblogs_code"><br><pre>        Calculator.prototype = {<br>            add: function (x, y) {<br>                return x + y;<br>            },<br><br>            subtract: function (x, y) {<br>                return x - y;<br>            }<br>        };<br>        //alert((new Calculator()).add(1, 3));</pre><br></div><br>&nbsp;<br><br>上方创建一个Calculator对象，在内部实现setter赋值。而后通过prototype属性来设定对象的原型<br><br>这样，我们就可以new Calculator对象以后，就可以调用add方法来计算结果了。var a=new Calculator();a.add(1,2);//3<br><br>&nbsp;<br><br>每一个函数、对象都有3大属性<br><br>## prototype     —（原型是对象，实例继承对象的属性） 实例原型   构造函数指向原型<br><br><span style="color: #000000;">每一个JavaScript<span style="color: #ff0000;">对象</span>(null除外)在<span style="color: #ff0000;">创建</span>的时候就会与<span style="color: #ff0000;">关联</span>另一个对象，这个对象就是我们所说的<span style="color: #ff0000;">原型</span>，<strong>每一个对象都会<span style="color: #ff0000;">从原型”继承”属性</span></strong><span style="color: #ff0000;">。</span></span><br><br><em>   <span style="color: #ff0000;">函数的</span>prototype属性指向一个<span style="color: #ff0000;">对象</span>
</em>   这个<span style="color: #ff0000;">对象</span>，就<span style="color: #ff0000;">是</span>点用该构造函数而创建的<span style="color: #ff0000;">实例的原型</span><br>*   对象===a的原型<br><div><br><br>    function Person() { }<br>    // 虽然写在注释里，但是你要注意：<br>    // prototype是函数才会有的属性<br>    Person.prototype.name = ‘Kevin’;<br>    var person1 = new Person();<br>    var person2 = new Person();<br>    console.log(person1.name) // Kevin<br>    console.log(person2.name) // Kevin<code>&lt;/pre&gt;
    &lt;/div&gt;
    &amp;nbsp;

    ![构造函数和实例原型的关系图](https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype1.png)![实例与实例原型的关系图](https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype2.png)
    &lt;div&gt;

    ## __proto__    ---对象指向原型

    &lt;/div&gt;
    对象的属性，指向该对象的原型，见上方右图
    &lt;div&gt;
    &lt;pre&gt;</code>function Person() { }<br>    var person = new Person();<br>    console.log(person.<strong>proto</strong> === Person.prototype);<br>    // true`<br>    </div>

<pre><code>## constructor   原型指向构造函数

原型的属性

一个构造函数可以生成多个实例==》无法通过原型指向实例

![实例原型与构造函数的关系图](https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype3.png)

## 实例与原型
</code></pre><ul>
<li><strong>实例有自己的属性</strong></li>
<li><strong>实例“继承”原型的属性</strong></li>
<li><p><strong>实例不覆盖、不重写原型的属性</strong><br>当读取实例的属性时，如果找不到，就会查找与对象关联的原型中的属性，如果还查不到，就去找原型的原型，一直找到最顶层为止。<br><div><br><pre>`function Person() {</pre></div></p>
<p>}</p>
<p>Person.prototype.name = ‘Kevin’;</p>
<p>var person = new Person();</p>
<p>person.name = ‘Daisy’;<br>console.log(person.name) // Daisy</p>
<p>delete person.name;<br>console.log(person.name) // Kevin`<br><br>在这个例子中，我们给实例对象 person 添加了 name 属性，当我们打印 person.name 的时候，结果自然为 Daisy。</p>
<p>但是当我们删除了 person 的 name 属性时，<span style="color: #ff0000;">读取 person.name</span>，从 person 对象中找不到 name 属性就会从 person 的原型也就是 person.<strong>proto</strong> ，也就是<span style="color: #ff0000;"> Person.prototype中查找</span>，幸运的是我们找到了 name 属性，结果为 Kevin。</p>
<h2 id="原型的原型-—-原型是对象"><a href="#原型的原型-—-原型是对象" class="headerlink" title="原型的原型 — 原型是对象"></a>原型的原型 — 原型是对象</h2></li>
<li><p>原型是对象</p>
</li>
<li>原型对象是通过 Object 构造函数生成的<br><div><br><pre><code>var obj = new Object();
obj.name = &#39;Kevin&#39;
console.log(obj.name) // Kevin</code></pre><br></div><br>Object.prototype 的原型是null   ，没有原型<br><div><br><pre>`console.log(Object.prototype.<strong>proto</strong> === null) // true</pre></div></li>
</ul>
<p><br><img src="https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype5.png" alt="原型链示意图"></p>
<p>&nbsp;</p>
<h2 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h2><p>上图中由相互关联的原型组成的链状结构就是原型链，也就是蓝色的这条线。</p>
<p>&nbsp;</p>
<p>参考：<a href="http://www.cnblogs.com/tomxu/archive/2012/01/05/2305453.html#undefined" target="_blank" rel="external">http://www.cnblogs.com/tomxu/archive/2012/01/05/2305453.html#undefined</a></p>
<p><a href="https://github.com/mqyqingfeng/Blog/issues/2" target="_blank" rel="external">https://github.com/mqyqingfeng/Blog/issues/2</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NET/">.NET</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-NET 从Telerik批量获取数据" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/21/NET 从Telerik批量获取数据/" class="article-date">
      <time datetime="2017-07-21T14:04:27.000Z" itemprop="datePublished">2017-07-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/21/NET 从Telerik批量获取数据/">.Net 从Telerik批量获取数据</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>之前的学长写的一个APP部署在Telerik，近期由于某些原因需要对数据做迁移。</p>
<p>由此，进入第一步：<strong>从Telerik获取数据</strong></p>
<p>Telerik提供的rest api简单易用，直接通过对应的文件存储的路径，就可以获取对应的JSON数据</p>
<ul>
<li>获取用户存储的数据<a href="http://api.everlive.com/v1/appid/Files/" target="_blank" rel="external">http://api.everlive.com/v1/appid/Files/</a></li>
<li>获取用户信息<a href="http://api.everlive.com/v1/" target="_blank" rel="external">http://api.everlive.com/v1/</a>“ + appId + “/Users/“<br>以下为项目完整代码（可人为控制成功率）</li>
</ul>
<pre><code>    class Program
    {

    /// &amp;lt;summary&amp;gt;
    /// // 收集下载失败的文件的信息
    /// &amp;lt;/summary&amp;gt;
    private static List&amp;lt;Items&amp;gt;
     itemsList = new List&amp;lt;Items&amp;gt;();

    private static string PATH = &quot;&quot;;
    /// &amp;lt;summary&amp;gt;
    /// 文件总数  默认 0
    /// &amp;lt;/summary&amp;gt;
    private static int count = 0;
    /// &amp;lt;summary&amp;gt;
    /// 已下载文件数
    /// &amp;lt;/summary&amp;gt;
    private static int downed = 0;
    /// &amp;lt;summary&amp;gt;
    /// 正在下载的文件的序号
    /// &amp;lt;/summary&amp;gt;
    private static int downing = 0;
    /// &amp;lt;summary&amp;gt;
    /// 下载成功文件数
    /// &amp;lt;/summary&amp;gt;
    private static int succ = 0;
    /// &amp;lt;summary&amp;gt;
    /// 下载失败文件数
    /// &amp;lt;/summary&amp;gt;
    private static int erro = 0;
    /// &amp;lt;summary&amp;gt;
    /// 再次下载时，成功的次数
    /// &amp;lt;/summary&amp;gt;
    private static int succag = 0;
    /// &amp;lt;summary&amp;gt;
    /// 再次下载时，失败的次数
    /// &amp;lt;/summary&amp;gt;
    private static int erroag = 0;
    /// &amp;lt;summary&amp;gt;
    /// 此次需要下载的文件次数
    /// &amp;lt;/summary&amp;gt;
    private static int countag = 0;
    /// &amp;lt;summary&amp;gt;
    /// 下载失败的log路径
    /// &amp;lt;/summary&amp;gt;
    private static string path0 = &quot;&quot;;
    /// &amp;lt;summary&amp;gt;
    /// 写入文件的字符
    /// &amp;lt;/summary&amp;gt;
    private static StringBuilder sb = new StringBuilder();
    static void Main(string[] args)
    {

         downlaodCC();
       //Task.Run(()=&amp;gt; readUsers());
        Console.ReadKey();

    }
    /// &amp;lt;summary&amp;gt;
    /// 从指定路径URI再次下载文件
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;param name=&quot;uri&quot;&amp;gt;&amp;lt;/param&amp;gt;
    /// &amp;lt;param name=&quot;path&quot;&amp;gt;&amp;lt;/param&amp;gt;
    public static void downag(string uri, string path)
    {
        //Console.WriteLine(&quot;第&quot; + (downing + 1) + &quot;个文件&quot; + &quot;开始下载&quot;);
        WebClient client = new WebClient();
        try
        {
            client.DownloadFile(uri, path);
            WriteLog(&quot;第&quot; + (downing + 1) + &quot;个文件&quot; + uri + &quot;下载成功&quot;);
            Console.WriteLine(&quot;第&quot; + (downing + 1) + &quot;个文件&quot; + uri + &quot;下载成功&quot;);
            succag++;
            //downed++;
        }
        catch
        {
            WriteLog(&quot;第&quot; + (downing + 1) + &quot;个文件&quot; + uri + &quot;下载失败&quot;);
            Console.WriteLine(&quot;第&quot; + (downing + 1) + &quot;个文件&quot; + uri + &quot;下载失败&quot;);
            //downsag(uri, path, 1 , (downing + 1));
            Items items = new Items();
            items.CreatedBy = &quot;&quot;;
            items.Filename = path;
            items.Uri = uri;
            itemsList.Add(items);
            erroag++;
            sb.AppendLine(&quot;第&quot; + downing + &quot;个文件&quot; + uri + &quot;  下载失败&quot;);
        }
        downed++;
        downing++;
        if (downed == countag)
        {
            succ += succag;
            erro = erroag;
            WriteLog(&quot;第二次下载完成，共&quot; + countag + &quot;个文件\n&quot; + &quot;成功&quot; + succag + &quot;个;\n 失败&quot; + erro + &quot;个\n&quot; + &quot;失败率&quot; + Convert.ToDouble((erro * 1.00 / (succag + erro))).ToString(&quot;P&quot;));
            Console.WriteLine(&quot;第二次下载完成，共&quot; + countag + &quot;个文件\n&quot; + &quot;成功&quot; + succag + &quot;个;\n 失败&quot; + erro + &quot;个\n&quot; + &quot;失败率&quot; + Convert.ToDouble((erro * 1.00 / (succag + erro))).ToString(&quot;P&quot;));
            sb.AppendLine(&quot;总计&quot; + count + &quot;个文件&quot;);
            WriteLog(&quot;总计&quot; + count + &quot;个文件\n&quot; + &quot;成功&quot; + succ + &quot;个;\n 失败&quot; + erro + &quot;个\n&quot; + &quot;失败率&quot; + Convert.ToDouble((erro * 1.00 / count)).ToString(&quot;P&quot;));
            Console.WriteLine(&quot;总计&quot; + count + &quot;个文件\n&quot; + &quot;成功&quot; + succ + &quot;个;\n 失败&quot; + erro + &quot;个\n&quot; + &quot;失败率&quot; + Convert.ToDouble((erro * 1.00 / count)).ToString(&quot;P&quot;));
            sb.AppendLine(&quot;共&quot; + erroag + &quot;个文件下载失败&quot;);
            if (File.Exists(path0))
            {
                File.Delete(path0);
            }
            File.WriteAllText(path0, sb.ToString());
            // 控制失败率为1% 进行循环下载
            if ((erro * 1.00 / count) &amp;gt; 0.01)
            {
                showErro();
            }
            else
            {
                readUsers();
            }

        }
    }

    /// &amp;lt;summary&amp;gt;
    /// 此方法目前未用
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;param name=&quot;uri&quot;&amp;gt;&amp;lt;/param&amp;gt;
    /// &amp;lt;param name=&quot;path&quot;&amp;gt;&amp;lt;/param&amp;gt;
    /// &amp;lt;param name=&quot;times&quot;&amp;gt;&amp;lt;/param&amp;gt;
    /// &amp;lt;param name=&quot;downingNum&quot;&amp;gt;&amp;lt;/param&amp;gt;
    public static void downsag(string uri, string path, int times, int downingNum)
    {
        if (times &amp;lt; 1)
        {
            WebClient client = new WebClient();
            try
            {
                client.DownloadFile(uri, path);
                WriteLog(&quot;第&quot; + downingNum + &quot;个文件&quot; + &quot;第&quot; + (times + 1) + &quot;次尝试下载 &quot; + uri + &quot;下载成功&quot;);
                Console.WriteLine(&quot;第&quot; + downingNum + &quot;个文件&quot; + &quot;第&quot; + (times + 1) + &quot;次尝试下载 &quot; + uri + &quot;下载成功&quot;);
                succ++;
                erro--;
                downed++;
            }
            catch
            {
                WriteLog(&quot;第&quot; + downingNum + &quot;个文件&quot; + &quot;第&quot; + (times + 1) + &quot;次尝试下载 &quot; + uri + &quot;下载失败&quot;);
                Console.WriteLine(&quot;第&quot; + downingNum + &quot;个文件&quot; + &quot;第&quot; + (times + 1) + &quot;次尝试下载 &quot; + uri + &quot;下载失败&quot;);
                downsag(uri, path, (times + 1), downingNum);
            }
        }

        else
        {
            downed++;
            sb.AppendLine(&quot;第&quot; + downingNum + &quot;个文件&quot; + &quot;11次尝试下载  &quot; + uri + &quot;  下载失败&quot;);

        }
        if (downed == count)
        {
            WriteLog(&quot;ccccc下载完成，共&quot; + count + &quot;个文件\n&quot; + &quot;成功&quot; + succ + &quot;个;\n 失败&quot; + erro + &quot;个\n&quot; + &quot;失败率&quot; + Convert.ToDouble((erro * 1.00 / count)).ToString(&quot;P&quot;));
            Console.WriteLine(&quot;ccccc下载完成，共&quot; + count + &quot;个文件\n&quot; + &quot;成功&quot; + succ + &quot;个;\n 失败&quot; + erro + &quot;个\n&quot; + &quot;失败率&quot; + Convert.ToDouble((erro * 1.00 / count)).ToString(&quot;P&quot;));
            sb.AppendLine(&quot;共&quot; + erro + &quot;个文件下载失败&quot;);
            File.WriteAllText(path0, sb.ToString());
        }

    }

    public static void downlaodCC()
    {
        string appId = &quot;&quot;;
        WriteLog(&quot;Select the app you want\n input &apos;b&apos;:babycare  \t input &apos;o&apos;:others&quot;);
        Console.WriteLine(&quot;Select the app you want\n input &apos;b&apos;:babycare  \t input &apos;o&apos;:others&quot;);
        string app = Console.ReadLine();

        if (app.Equals(&quot;b&quot;))
        {
            appId = &quot;kzdfjgbhdjkfghjkdfsgjksdngjklsdhgjklsdhngjfgkds&quot;;
        }
        else
        {
            WriteLog(&quot;Input your appId:&quot;);
            Console.Write(&quot;Input your appId:&quot;);
            appId = Console.ReadLine();
        }
        WriteLog(&quot;Input your File path&quot;);
        Console.WriteLine(&quot;Input your File path&quot;);
        inputPath();
        #region MyRegion
        /*string filePath = Console.ReadLine();
        PATH = filePath + @&quot;\telerikFile&quot;;
        try
        {
            Directory.CreateDirectory(PATH);
            Console.WriteLine(&quot;创建成功&quot;);
        }
        catch
        {
            Console.WriteLine(&quot;路径错误请重新输入&quot;);
            inputPath();
        }*/
        #endregion
        //提供用于将数据发送到由 URI 标识的资源及从这样的资源接收数据的常用方法。
        WebClient wc = new WebClient();
        try
        {
            //wc.DownloadFile(&quot;http://api.everlive.com/v1/&quot;+appId+&quot;/Files/&quot;, @&quot;e:\Files.txt&quot;);
            // 下载用户信息  Json
            wc.DownloadFile(&quot;http://api.everlive.com/v1/&quot; + appId + &quot;/Users/&quot;, PATH + @&quot;Users.txt&quot;);
        }
        catch
        {
            WriteLog(&quot;网络不通&quot;);
            Console.WriteLine(&quot;网络不通&quot;);
        }
        //string str = System.IO.File.ReadAllText(&quot;e:\Files.txt&quot;);
        // 下载指定APP的用户文件基本信息
        string json = wc.DownloadString(&quot;http://api.everlive.com/v1/appid/Files/&quot;);
        JObject sum = (JObject)JsonConvert.DeserializeObject(json);
        // 获取文件总数
        count = int.Parse(sum[&quot;Count&quot;].ToString());
        WriteLog(&quot;一共有&quot; + count + &quot;个文件&quot;);
        Console.WriteLine(&quot;一共有&quot; + count + &quot;个文件&quot;);
        JArray result = JArray.Parse(sum[&quot;Result&quot;].ToString());
        for (var i = 0; i &amp;lt; result.Count; i++)
        {
            JObject j = JObject.Parse(result[i].ToString());
            WriteLog(&quot;第&quot; + (i + 1) + &quot;组数据&quot; + &quot;开始下载&quot;);
            Console.WriteLine(&quot;第&quot; + (i + 1) + &quot;组数据&quot; + &quot;开始下载&quot;);
            string path = PATH + j[&quot;CreatedBy&quot;].ToString() + &quot;\\&quot;;
            if (!Directory.Exists(path))
            {
                Directory.CreateDirectory(path);
            }
            WriteLog(j[&quot;CreatedBy&quot;].ToString());
            Console.WriteLine(j[&quot;CreatedBy&quot;].ToString());
            WriteLog(j[&quot;Uri&quot;].ToString());
            Console.WriteLine(j[&quot;Uri&quot;].ToString());
            WriteLog(j[&quot;Filename&quot;].ToString());
            Console.WriteLine(j[&quot;Filename&quot;].ToString());
            //ThreadPool.QueueUserWorkItem(new WaitCallback(dt.downs));
            Task.Run(() =&amp;gt; downs(j[&quot;Uri&quot;].ToString(), path + j[&quot;Filename&quot;].ToString()));
            //路径应该设置为用户注册邮箱，设想：重新查询后，对文件夹进行重命名
            //Thread.Sleep(10);
        }

    }
    /// &amp;lt;summary&amp;gt;
    /// 输入保存用户文件的路径
    /// &amp;lt;/summary&amp;gt;
    public static void inputPath()
    {
        string ss = Console.ReadLine();
        PATH = ss + @&quot;\telerikFile\&quot;;
        try
        {
            Directory.CreateDirectory(PATH);
            WriteLog(&quot;路径可用\n正在继续&quot;);
            Console.WriteLine(&quot;路径可用\n正在继续&quot;);
            path0 = PATH + @&quot;\log.txt&quot;;
        }
        catch
        {
            WriteLog(&quot;路径错误请重新输入&quot;);
            Console.WriteLine(&quot;路径错误请重新输入&quot;);
            inputPath();
        }
    }

    public static void showErro()
    {
        WriteLog(&quot;再次尝试下载&quot;);
        Thread.Sleep(3000);
        Console.WriteLine(&quot;第二次尝试下载&quot;);
        int i = 1;
        sb = new StringBuilder();
        erroag = 0;
        succag = 0;
        countag = erro;
        downing = 0;
        downed = 0;

        /* string ins = Console.ReadLine();
         if (ins.Equals(&quot;y&quot;)) { */
        List&amp;lt;Items&amp;gt; itemsListag = itemsList;
        itemsList = new List&amp;lt;Items&amp;gt;();
        foreach (Items items in itemsListag)
        {
            WriteLog(&quot;第&quot; + i + &quot;个文件&quot; + items.Uri + &quot;开始下载&quot;);
            Console.WriteLine(&quot;第&quot; + i + &quot;个文件&quot; + items.Uri + &quot;开始下载&quot;);

            //Console.WriteLine(&quot;第&quot;+i+&quot;个失败文件&quot;+items.CreatedBy);
            //Console.WriteLine(items.Filename);
            //Console.WriteLine(items.Uri);
            Task.Run(() =&amp;gt; downag(items.Uri, items.Filename));
            i++;
            //   }
        }
    }
    /// &amp;lt;summary&amp;gt;
    /// 获取用户
    /// &amp;lt;/summary&amp;gt;
    public static void readUsers()
    {
        Object obj = new object();
        lock(obj)
        {
            WebClient wc = new WebClient();
            //wc.DownloadFile(&quot;http://api.everlive.com/v1/appid/Users/&quot;, PATH + @&quot;Users.txt&quot;);
            string str = System.IO.File.ReadAllText(@&quot;E:\telerikFile\Users.txt&quot;);
            JObject sum = (JObject)JsonConvert.DeserializeObject(str);
            count = int.Parse(sum[&quot;Count&quot;].ToString());
            WriteLog(&quot;一共有&quot; + count + &quot;用户&quot;);
            Console.WriteLine(&quot;一共有&quot; + count + &quot;用户&quot;);
            JArray result = JArray.Parse(sum[&quot;Result&quot;].ToString());
            for (var i = 0; i &amp;lt; result.Count; i++)

            {
                JObject j = JObject.Parse(result[i].ToString());
                WriteLog(&quot;第&quot; + (i + 1) + &quot;个用户&quot;);
                WriteLog(j[&quot;Email&quot;].ToString());
                WriteLog(j[&quot;Id&quot;].ToString());
                WriteLog(j[&quot;Owner&quot;].ToString());
                Console.WriteLine(&quot;第&quot; + (i + 1) + &quot;个用户&quot;);
                Console.WriteLine(j[&quot;Email&quot;].ToString());
                Console.WriteLine(j[&quot;Id&quot;].ToString());
                Console.WriteLine(j[&quot;Owner&quot;].ToString());
                // 用id命名文件夹
                string pathO = PATH + j[&quot;Id&quot;].ToString();
                // 用邮箱命名文件夹
                string pathN = PATH + j[&quot;Email&quot;].ToString();
                Task.Run(() =&amp;gt; rename(pathO, pathN));
            }
        }

    }
    /// &amp;lt;summary&amp;gt;
    /// 如果同一个用户存在两个文件夹，则合并为一个，没有做比较就之间删除文件   处理不恰当
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;param name=&quot;pathO&quot;&amp;gt;原文件夹&amp;lt;/param&amp;gt;
    /// &amp;lt;param name=&quot;pathN&quot;&amp;gt;新文件夹&amp;lt;/param&amp;gt;
    public static void rename(string pathO, string pathN)
    {
        try
        {
            if (Directory.Exists(pathN))
            {
                Directory.Delete(pathN, true);
            }
            Directory.Move(pathO, pathN);
        }
        catch
        {
            //Console.WriteLine(&quot;重命名失败&quot;);
        }
    }
    /// &amp;lt;summary&amp;gt;
    /// 写入文件，做记录测试
    /// &amp;lt;/summary&amp;gt;
    /// &amp;lt;param name=&quot;str&quot;&amp;gt;&amp;lt;/param&amp;gt;

    private static void WriteLog(string str)
    {
        Task.Run(() =&amp;gt;
        {
            try
            {
                string filePath = PATH + &quot;downloadLog.txt&quot;;
                StreamWriter sw = null;
                if (!File.Exists(filePath))
                {
                    sw = File.CreateText(filePath);
                }
                else
                {
                    sw = File.AppendText(filePath);
                }
                sw.Write(str + Environment.NewLine);//+ DateTime.Now.ToString()
                sw.Close();
            }
            catch (Exception ex)
            {
                ex.ToString();
            }
        });
    }
    }

 `&lt;/pre&gt;
&lt;div&gt;
&lt;pre&gt;` class Items
    {   
        /// &amp;lt;summary&amp;gt;
        /// 数据的创建人
        /// &amp;lt;/summary&amp;gt;
        public string CreatedBy { get; set; }
        /// &amp;lt;summary&amp;gt;
        /// 数据的URI
        /// &amp;lt;/summary&amp;gt;
        public string Uri { get; set; }
        /// &amp;lt;summary&amp;gt;
        /// 文件名字
        /// &amp;lt;/summary&amp;gt;
        public string Filename { get; set; }

    }

&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>存在的问题</p>
<ul>
<li>文件夹合并、文件的取舍，应该对比MD5值</li>
<li>公共变量未加锁Lock</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/C/">C#</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NET/">.NET</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-NET 泛型入门简介" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/21/NET 泛型入门简介/" class="article-date">
      <time datetime="2017-07-21T11:36:02.000Z" itemprop="datePublished">2017-07-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/21/NET 泛型入门简介/">.NET 泛型入门简介</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>泛型可以简单的理解为：在类名后面后，添加用&lt;&gt;尖括号括起来的类型参数列表，用来定义一组“通用化”的类型</p>
<pre><code>class Pair&lt;T1,T2&gt;
{
    public T1 First;
    public T2 Second;
}

以上Pair类的类型参数为T1，T2。T1，T2可以代表任何类型，因此只需要定义一次泛型就可以实现所有参数类型的调用。

以下为Pair类的应用实例

 Pair&lt;int,stirng&gt; p=new  Pair&lt;int,stirng&gt;
{
    First=1;
    Second=2;
}
......

int i=p.First;
string s=p.Second;

在定义泛型类型时可以对客户端代码在实例化类时用于类型参数的类型加以限制，
</code></pre><ul>
<li>使用<strong>Where</strong>关键字指定</li>
<li>多个限制，使用应为”,”分开</li>
<li>new() 放到最后<br><table border="0" cellspacing="0" cellpadding="2"><br><tbody><br><tr><br><td valign="top" width="214">约束</td><br><td valign="top" width="459">说明</td><br></tr><br><tr><br><td valign="top" width="214">where T: struct</td><br><td valign="top" width="459">类型参数必须是值类型</td><br></tr><br><tr><br><td valign="top" width="214">where T: class</td><br><td valign="top" width="459">类型参数必须是引用类型</td><br></tr><br><tr><br><td valign="top" width="214">where T: new()</td><br><td valign="top" width="459">类型参数必须有一个 public 且无参数的构造函数</td><br></tr><br><tr><br><td valign="top" width="214">where T: &lt;base classname&gt;</td><br><td valign="top" width="459">类型参数必须继承至指定的基类（base class）</td><br></tr><br><tr><br><td valign="top" width="214">where T: &lt;interface name&gt;</td><br><td valign="top" width="459">类型参数必须是指定的接口或实现了指定接口的类型</td><br></tr><br><tr><br><td valign="top" width="214">where T: U</td><br><td valign="top" width="459">为 T 提供的类型参数必须是为 U 提供的参数或派生自为 U 提供的参数</td><br></tr><br></tbody><br></table><div>


</div></li>
</ul>
<pre><code> class Pair&amp;lt;T1,T2&amp;gt;  where T : class, new()
{
    public T1 First;
    public T2 Second;
}
</code></pre><p>以上限制，类型参数为</p>
<ul>
<li>参数必须是引用类型</li>
<li>参数必有一个public且无参数的构造函数</li>
<li><pre><code>[TestMethod] 
public void TestMethod1() 
{ 
    List&amp;lt;String&amp;gt; names = ``new` `List&amp;lt;String&amp;gt;();`&lt;/div&gt;
    names.Add( &quot;Bruce&quot; ); 
    names.Add( &quot;Alfred&quot; ); 
    names.Add( &quot;Tim&quot; ); 
    names.Add( &quot;Richard&quot; ); 

names.ForEach(Print); 
}

private void Print( string s) 
{
    Console.WriteLine(s);`&lt;/div&gt;
}
</code></pre><div>常用的泛型有</div>
</li>
<li><p>List&lt;T&gt;列表</p>
</li>
<li>LinkedList&lt;T&gt;链表</li>
<li>Dictionary&lt;TKey,TValue&gt;字典</li>
<li>Queue&lt;T&gt;队列</li>
<li>Stack&lt;T&gt;堆栈<br>参考：<a href="http://www.cnblogs.com/forgetu/archive/2011/05/08/csharp-generics.html" target="_blank" rel="external">http://www.cnblogs.com/forgetu/archive/2011/05/08/csharp-generics.html</a></li>
</ul>
<p>Blog.jobbole.com/87980</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/C/">C#</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NET/">.NET</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Net中 数组、 ArrayList、List、IList数组的区别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/21/Net中 数组、 ArrayList、List、IList数组的区别/" class="article-date">
      <time datetime="2017-07-21T01:05:22.000Z" itemprop="datePublished">2017-07-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/21/Net中 数组、 ArrayList、List、IList数组的区别/">.Net中 数组、 ArrayList、List、IList数组的区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>在C#中数组，ArrayList，List都能够存储一组对象，之间必有区别</p>
<h2 id="数组Array"><a href="#数组Array" class="headerlink" title="数组Array"></a>数组Array</h2><ul>
<li>类似于线性表，在内存中是连续存储的，便于存储、取值，但一般不做插入、删除操作。</li>
<li>存储相同类型元素的固定大小的顺序集合</li>
<li>使用用一组连续存储单元存放数组的数据元素，存在次序约定问题</li>
<li>大小固定</li>
<li>谨防数组越界</li>
<li>不建议使用数组<br><div id="crayon-5970cac634b45906825588-9" class="crayon-line"><span class="crayon-h"> </span><span class="crayon-c">//System.Array</span></div><br><div id="crayon-5970cac634b45906825588-10" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-c">//1、数组[] 特定类型、固定长度</span></div><br><div id="crayon-5970cac634b45906825588-11" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span> <span class="crayon-v">str1</span> <span class="crayon-o">=</span> <span class="crayon-r">new</span> <span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-12" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-v">str1</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span> <span class="crayon-o">=</span> <span class="crayon-s">“a”</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-13" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-v">str1</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span> <span class="crayon-o">=</span> <span class="crayon-s">“b”</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-14" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-v">str1</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span> <span class="crayon-o">=</span> <span class="crayon-s">“c”</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-15" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">str1</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-16" class="crayon-line crayon-striped-line"></div><br><div id="crayon-5970cac634b45906825588-17" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span> <span class="crayon-v">str2</span> <span class="crayon-o">=</span> <span class="crayon-r">new</span> <span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span> <span class="crayon-sy">{</span> <span class="crayon-s">“a”</span><span class="crayon-sy">,</span> <span class="crayon-s">“b”</span><span class="crayon-sy">,</span> <span class="crayon-s">“c”</span> <span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-18" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">str2</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-19" class="crayon-line"></div><br><div id="crayon-5970cac634b45906825588-20" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-t">string</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span> <span class="crayon-v">str3</span> <span class="crayon-o">=</span> <span class="crayon-sy">{</span> <span class="crayon-s">“a”</span><span class="crayon-sy">,</span> <span class="crayon-s">“b”</span><span class="crayon-sy">,</span> <span class="crayon-s">“c”</span> <span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-21" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-v">str3</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-22" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-c">//2、二维数组</span></div><br><div id="crayon-5970cac634b45906825588-23" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-c">//int[,] intArray=new int[2,3]{ {1,11,111},{2,22,222}};</span></div><br><div id="crayon-5970cac634b45906825588-24" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-t">int</span><span class="crayon-sy">[</span><span class="crayon-sy">,</span><span class="crayon-sy">]</span> <span class="crayon-v">intArray</span> <span class="crayon-o">=</span> <span class="crayon-r">new</span> <span class="crayon-t">int</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-25" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span> <span class="crayon-o">=</span> <span class="crayon-cn">1</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-26" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span> <span class="crayon-o">=</span> <span class="crayon-cn">11</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-27" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">]</span> <span class="crayon-o">=</span> <span class="crayon-cn">111</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-28" class="crayon-line crayon-striped-line"></div><br><div id="crayon-5970cac634b45906825588-29" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span> <span class="crayon-o">=</span> <span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-30" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span> <span class="crayon-o">=</span> <span class="crayon-cn">22</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-31" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">]</span> <span class="crayon-o">=</span> <span class="crayon-cn">222</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-32" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">“{0},{1},{2}”</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-33" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">“{0},{1},{2}”</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-34" class="crayon-line crayon-striped-line"></div><br><div id="crayon-5970cac634b45906825588-35" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-c">//3、多维数组</span></div><br><div id="crayon-5970cac634b45906825588-36" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-t">int</span><span class="crayon-sy">[</span><span class="crayon-sy">,</span> <span class="crayon-sy">,</span><span class="crayon-sy">]</span> <span class="crayon-v">intArray1</span> <span class="crayon-o">=</span> <span class="crayon-r">new</span> <span class="crayon-t">int</span><span class="crayon-sy">[</span><span class="crayon-sy">,</span><span class="crayon-sy">,</span><span class="crayon-sy">]</span></div><br><div id="crayon-5970cac634b45906825588-37" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-sy">{</span></div><br><div id="crayon-5970cac634b45906825588-38" class="crayon-line crayon-striped-line"><span class="crayon-h">                </span><span class="crayon-sy">{</span><span class="crayon-sy">{</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span> <span class="crayon-sy">{</span><span class="crayon-cn">11</span><span class="crayon-sy">,</span> <span class="crayon-cn">11</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span> <span class="crayon-sy">{</span><span class="crayon-cn">111</span><span class="crayon-sy">,</span> <span class="crayon-cn">111</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><br><div id="crayon-5970cac634b45906825588-39" class="crayon-line"><span class="crayon-h">                </span><span class="crayon-sy">{</span><span class="crayon-sy">{</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span> <span class="crayon-sy">{</span><span class="crayon-cn">22</span><span class="crayon-sy">,</span> <span class="crayon-cn">22</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span> <span class="crayon-sy">{</span><span class="crayon-cn">222</span><span class="crayon-sy">,</span> <span class="crayon-cn">222</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><br><div id="crayon-5970cac634b45906825588-40" class="crayon-line crayon-striped-line"><span class="crayon-h">                </span><span class="crayon-sy">{</span><span class="crayon-sy">{</span><span class="crayon-cn">3</span><span class="crayon-sy">,</span> <span class="crayon-cn">3</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span> <span class="crayon-sy">{</span><span class="crayon-cn">33</span><span class="crayon-sy">,</span> <span class="crayon-cn">33</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span> <span class="crayon-sy">{</span><span class="crayon-cn">333</span><span class="crayon-sy">,</span> <span class="crayon-cn">333</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span></div><br><div id="crayon-5970cac634b45906825588-41" class="crayon-line"><span class="crayon-h">            </span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-42" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">“{0},{1},{2},{3},{4},{5}”</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></div><br><div id="crayon-5970cac634b45906825588-43" class="crayon-line"><span class="crayon-h">               </span><span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-44" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">“{0},{1},{2},{3},{4},{5}”</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></div><br><div id="crayon-5970cac634b45906825588-45" class="crayon-line"><span class="crayon-h">                </span><span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b45906825588-46" class="crayon-line crayon-striped-line"><span class="crayon-h">            </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-s">“{0},{1},{2},{3},{4},{5}”</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></div><br><div id="crayon-5970cac634b45906825588-47" class="crayon-line"><span class="crayon-h">                </span><span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">intArray1</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">2</span><span class="crayon-sy">,</span> <span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div></div><div>

</div></li>
</ul>
<h3 id="Array-forEach-函数"><a href="#Array-forEach-函数" class="headerlink" title="Array.forEach 函数"></a>Array.forEach 函数</h3><div class="introduction"><br><br><em>   <span id="mt1" class="sentence" data-guid="cfce4b4dace31932f1868d883951272d" data-source="">对 <strong>Array</strong> 对象的每个元素调用指定函数。</span> <span id="mt2" class="sentence" data-guid="6df02432b13071156716c2ec5c127414" data-source="">此函数是静态的，可在不创建对象实例的情况下调用。</span>
</em>   Firefox 除外）中，<strong>forEach</strong> 函数都忽略数组中值为 <span class="input">undefined</span> 的元素<br><div><br><br>    public static void ForEach&lt;T&gt;(<br>        T[] array,<br>        Action&lt;T&gt; action<br>    )<code>&lt;/pre&gt;
    &lt;/div&gt;
    &lt;/div&gt;
    &lt;div id=&quot;syntaxSection&quot; class=&quot;section&quot;&gt;
    &lt;div id=&quot;code-snippet-1&quot; class=&quot;codeSnippetContainer&quot;&gt;
    &lt;div class=&quot;codeSnippetContainerCodeContainer&quot;&gt;
    &lt;div id=&quot;CodeSnippetContainerCode_1aea524e-38fa-4371-bc09-a48f4c48b531&quot; class=&quot;codeSnippetContainerCode&quot; dir=&quot;ltr&quot;&gt;
    &lt;table style=&quot;height: 198px;&quot; summary=&quot;table&quot; width=&quot;364&quot;&gt;
    &lt;tbody&gt;
    &lt;tr&gt;
    &lt;th scope=&quot;col&quot;&gt;&lt;span id=&quot;mt3&quot; class=&quot;sentence&quot; data-guid=&quot;b4dad0fe5fbef2c0e24d9db1cc69e5a2&quot; data-source=&quot;&quot;&gt;术语&lt;/span&gt;&lt;/th&gt;
    &lt;th scope=&quot;col&quot;&gt;&lt;span id=&quot;mt4&quot; class=&quot;sentence&quot; data-guid=&quot;30618b3b44fa316257d07e387759fae5&quot; data-source=&quot;&quot;&gt;定义&lt;/span&gt;&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
    &lt;td data-th=&quot;术语&quot;&gt;&lt;span class=&quot;parameter&quot;&gt;array&lt;/span&gt;&lt;/td&gt;
    &lt;td data-th=&quot;定义&quot;&gt;&lt;span id=&quot;mt5&quot; class=&quot;sentence&quot; data-guid=&quot;948352e0d370dd0991aa6f3d5f88330c&quot; data-source=&quot;&quot;&gt;要枚举的 **Array** 对象。&lt;/span&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
    &lt;td data-th=&quot;术语&quot;&gt;&lt;span class=&quot;parameter&quot;&gt;method&lt;/span&gt;&lt;/td&gt;
    &lt;td data-th=&quot;定义&quot;&gt;&lt;span id=&quot;mt6&quot; class=&quot;sentence&quot; data-guid=&quot;fba19d57213fe41e88b2d51c372d753c&quot; data-source=&quot;&quot;&gt;要对数组中每个元素调用的函数。&lt;/span&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;div&gt;
    &lt;pre&gt;</code>public class SamplesArray<br>    {<br>        public static void Main()<br>        {<br>            // create a three element array of integers<br>            int[] intArray = new int[] {2, 3, 4};<br><br>            // set a delegate for the ShowSquares method<br>            Action&lt;int&gt; action = new Action&lt;int&gt;(ShowSquares);<br><br>            Array.ForEach(intArray, action);<br>        }<br><br>        private static void ShowSquares(int val)<br>        {<br>            Console.WriteLine(“{0:d} squared = {1:d}”, val, val<em>val);<br>        }<br>    }<br><br>    /</em><br>    This code produces the following output:<br><br>    2 squared = 4<br>    3 squared = 9<br>    4 squared = 16<br>    */`<br>    </div><br>    </div><br>    <br>    <br>    <br>    

<pre><code>## ArrayList
</code></pre><ul>
<li>在使用该类时必须进行引用（装箱、拆箱）</li>
<li>ArrayList对象用来克服Array的缺点</li>
<li>大小是按照其中存储的数据来<strong>动态</strong>扩充与收缩</li>
<li>ArrayList会把所有插入其中的数据当作为object类型来处理</li>
<li>一个对象可存储多种类型的数据</li>
<li>可能会报类型不匹配的错误  不安全</li>
<li>通过调用TrimToSize、设置Capacity属性减少容量</li>
<li><p>可通过调用 TrimToSize 或通过显式设置 Capacity（容量） 属性减少容量。</p>
<div></div><br><div id="crayon-5970cac634b58918629451-5" class="crayon-line"><span class="crayon-m">public</span> <span class="crayon-m">static</span> <span class="crayon-t">void</span> <span class="crayon-e">Main</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h">  </span><span class="crayon-sy">{</span></div><br><div id="crayon-5970cac634b58918629451-6" class="crayon-line crayon-striped-line"></div><br><div id="crayon-5970cac634b58918629451-7" class="crayon-line"><span class="crayon-h">      </span><span class="crayon-e">ArrayList </span><span class="crayon-v">myAL</span> <span class="crayon-o">=</span> <span class="crayon-r">new</span> <span class="crayon-e">ArrayList</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-8" class="crayon-line crayon-striped-line"><span class="crayon-h">      </span><span class="crayon-v">myAL</span><span class="crayon-sy">.</span><span class="crayon-e">Add</span><span class="crayon-sy">(</span><span class="crayon-s">“Hello”</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-9" class="crayon-line"><span class="crayon-h">      </span><span class="crayon-v">myAL</span><span class="crayon-sy">.</span><span class="crayon-e">Add</span><span class="crayon-sy">(</span><span class="crayon-s">“World”</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-10" class="crayon-line crayon-striped-line"><span class="crayon-h">      </span><span class="crayon-v">myAL</span><span class="crayon-sy">.</span><span class="crayon-e">Add</span><span class="crayon-sy">(</span><span class="crayon-s">“!”</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-11" class="crayon-line"></div><br><div id="crayon-5970cac634b58918629451-12" class="crayon-line crayon-striped-line"><span class="crayon-h">      </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span> <span class="crayon-s">“myAL”</span> <span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-13" class="crayon-line"><span class="crayon-h">      </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span> <span class="crayon-s">“    Count:    {0}”</span><span class="crayon-sy">,</span> <span class="crayon-v">myAL</span><span class="crayon-sy">.</span><span class="crayon-i">Count</span> <span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-14" class="crayon-line crayon-striped-line"><span class="crayon-h">      </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span> <span class="crayon-s">“    Capacity: {0}”</span><span class="crayon-sy">,</span> <span class="crayon-v">myAL</span><span class="crayon-sy">.</span><span class="crayon-i">Capacity</span> <span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-15" class="crayon-line"><span class="crayon-h">      </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">Write</span><span class="crayon-sy">(</span> <span class="crayon-s">“    Values:”</span> <span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-16" class="crayon-line crayon-striped-line"><span class="crayon-h">      </span><span class="crayon-e">PrintValues</span><span class="crayon-sy">(</span> <span class="crayon-i">myAL</span> <span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-17" class="crayon-line"><span class="crayon-h">   </span><span class="crayon-sy">}</span></div><br><div id="crayon-5970cac634b58918629451-18" class="crayon-line crayon-striped-line"></div><br><div id="crayon-5970cac634b58918629451-19" class="crayon-line"><span class="crayon-h">   </span><span class="crayon-m">public</span> <span class="crayon-m">static</span> <span class="crayon-t">void</span> <span class="crayon-e">PrintValues</span><span class="crayon-sy">(</span> <span class="crayon-e">IEnumerable </span><span class="crayon-i">myList</span> <span class="crayon-sy">)</span><span class="crayon-h">  </span><span class="crayon-sy">{</span></div><br><div id="crayon-5970cac634b58918629451-20" class="crayon-line crayon-striped-line"><span class="crayon-h">      </span><span class="crayon-st">foreach</span> <span class="crayon-sy">(</span> <span class="crayon-t">Object</span> <span class="crayon-e">obj </span><span class="crayon-st">in</span> <span class="crayon-i">myList</span> <span class="crayon-sy">)</span></div><br><div id="crayon-5970cac634b58918629451-21" class="crayon-line"><span class="crayon-h">         </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">Write</span><span class="crayon-sy">(</span> <span class="crayon-s">“   {0}”</span><span class="crayon-sy">,</span> <span class="crayon-i">obj</span> <span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-22" class="crayon-line crayon-striped-line"><span class="crayon-h">      </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">WriteLine</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-23" class="crayon-line"><span class="crayon-h">      </span><span class="crayon-v">Console</span><span class="crayon-sy">.</span><span class="crayon-e">ReadKey</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><br><div id="crayon-5970cac634b58918629451-24" class="crayon-line crayon-striped-line"><span class="crayon-h">   </span><span class="crayon-sy">}</span></div>

<h2 id="泛型List-lt-T-gt"><a href="#泛型List-lt-T-gt" class="headerlink" title="泛型List&lt;T&gt;"></a>泛型List&lt;T&gt;</h2></li>
<li><p>解决ArrayList的缺点</p>
</li>
<li>ArrayList 类的泛型等效类</li>
<li>大小可按需动态增加</li>
<li>必须为其声明List集合内数据的对象类型</li>
<li><p>可用委托&lt;&gt;<br><div><br><pre>`(1)声明 List&lt;T&gt;mlist = new List&lt;T&gt;();<br> eg: string[] Arr = {“a”,”b”,”c”};</pre></div></p>
<pre><code>List&amp;lt;string&amp;gt; mlist = new List&amp;lt;string&amp;gt;(Arr);
</code></pre><p>(2)添加一个元素 List.Add(T item)　<br>   eg: mlist.Add(“d”);<br>(3)添加集合元素<br>   eg: string[] Arr2 ={“f”,”g”.”h”};</p>
<pre><code>mlist.AddRange(Arr2);
</code></pre><p>(4)在index位置添加一个元素 Insert(int index,T item)<br>   eg: mlist.Insert(1,”p”);<br>(5)遍历List中元素<br>　　foreach(T element in mlist) T的类型与mlist声明时一样<br>　　　　　{<br>　　　　　　 Console.WriteLine(element);</p>
<pre><code>      }
eg:
foreach(string s in mlist)
      {
         Console.WriteLine(s);
       }
</code></pre><p>(6)删除元素</p>
<pre><code>List.Remove(T item) 删除一个值
eg: mlist.Remove(&quot;a&quot;);
List.RemoveAt(int index);删除下标为index的元素
eg: mlist.RemoveAt(0);

List.RemoveRange(int index,int count);　下标index开始，删除count个元素
eg：mlist.RemoveRange(3,2);
</code></pre><p>(7)判断某个元素是否在该List中</p>
<pre><code>List.Contains(T item)　返回true或false
eg:
if(mlist.Contains&quot;(&quot;g&quot;))
   Console.WriteLine(&quot;g存在列表中&quot;);
else
   mlist.Add(&quot;g&quot;);
</code></pre><p>(8)给List里面元素排序 List.Sort()　默认是元素每一个字母按升序<br>   eg: mlist.Sort();<br>(9)给List里面元素顺序反转 List.Reverse() 可以与List.Sort()配合使用<br>(10)List清空 List.Clear()<br>   eg: mlist.Clear();<br>(11)获得List中元素数目 List.Count()　返回int值<br>   eg: mlist.count();</p>
</li>
</ul>
<p><br>&nbsp;</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>多用List   foreach<br>参考<a href="https://msdn.microsoft.com/zh-cn/library/s6hkc2c4(v=vs.80).aspx" target="_blank" rel="external">https://msdn.microsoft.com/zh-cn/library/s6hkc2c4(v=vs.80).aspx</a></li>
</ul>
<p><a href="http://blog.csdn.net/zhangxinbin5/article/details/8987277" target="_blank" rel="external">http://blog.csdn.net/zhangxinbin5/article/details/8987277</a></p>
<p>blog.jobbole.com/102452</p>
<p><a href="https://msdn.microsoft.com/en-us/library/zecdkyw2(v=vs.110).aspx?cs-save-lang=1&amp;cs-lang=csharp#code-snippet-1" target="_blank" rel="external">https://msdn.microsoft.com/en-us/library/zecdkyw2(v=vs.110).aspx?cs-save-lang=1&amp;cs-lang=csharp#code-snippet-1</a></p>
<p>&nbsp;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/C/">C#</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NET/">.NET</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 谢红光
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 6;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>
